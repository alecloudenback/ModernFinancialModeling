<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.9.16">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Alec Loudenback">

<title>5&nbsp; Elements of Programming – Modern Financial Modeling</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" integrity="sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2" crossorigin="anonymous"></script><script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./first-abstractions.html" rel="next">
<link href="./conceptual-foundations.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-3ae586159be244f9b7da5612ca3882f5.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark-4bdbedee417e7c90344270729bc2963b.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-3ae586159be244f9b7da5612ca3882f5.css" rel="stylesheet" class="quarto-color-scheme-extra" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-6ee83196eee0eba8702f4dd364e0de5e.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark-860856505d205c70e29714261f4c7ddb.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="site_libs/bootstrap/bootstrap-6ee83196eee0eba8702f4dd364e0de5e.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme-extra" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdn.jsdelivr.net/npm/requirejs@2.3.6/require.min.js" integrity="sha384-c9c+LnTbwQ3aujuU7ULEPVvgLs+Fn6fJUvIGTsuu1ZcCf11fiEubah0ttpca4ntM sha384-6V1/AdqZRWk1KAlWbKBlGhN7VG4iE/yAZcO6NZPMF8od0vukrvr0tg4qY6NSrItx" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>
<script data-goatcounter="https://julia-fin-book.goatcounter.com/count" async="" src="//gc.zgo.at/count.js"></script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar floating quarto-light"><script id="quarto-html-before-body" type="application/javascript">
    const toggleBodyColorMode = (bsSheetEl) => {
      const mode = bsSheetEl.getAttribute("data-mode");
      const bodyEl = window.document.querySelector("body");
      if (mode === "dark") {
        bodyEl.classList.add("quarto-dark");
        bodyEl.classList.remove("quarto-light");
      } else {
        bodyEl.classList.add("quarto-light");
        bodyEl.classList.remove("quarto-dark");
      }
    }
    const toggleBodyColorPrimary = () => {
      const bsSheetEl = window.document.querySelector("link#quarto-bootstrap:not([rel=disabled-stylesheet])");
      if (bsSheetEl) {
        toggleBodyColorMode(bsSheetEl);
      }
    }
    const setColorSchemeToggle = (alternate) => {
      const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
      for (let i=0; i < toggles.length; i++) {
        const toggle = toggles[i];
        if (toggle) {
          if (alternate) {
            toggle.classList.add("alternate");
          } else {
            toggle.classList.remove("alternate");
          }
        }
      }
    };
    const toggleColorMode = (alternate) => {
      // Switch the stylesheets
      const primaryStylesheets = window.document.querySelectorAll('link.quarto-color-scheme:not(.quarto-color-alternate)');
      const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
      manageTransitions('#quarto-margin-sidebar .nav-link', false);
      if (alternate) {
        // note: dark is layered on light, we don't disable primary!
        enableStylesheet(alternateStylesheets);
        for (const sheetNode of alternateStylesheets) {
          if (sheetNode.id === "quarto-bootstrap") {
            toggleBodyColorMode(sheetNode);
          }
        }
      } else {
        disableStylesheet(alternateStylesheets);
        enableStylesheet(primaryStylesheets)
        toggleBodyColorPrimary();
      }
      manageTransitions('#quarto-margin-sidebar .nav-link', true);
      // Switch the toggles
      setColorSchemeToggle(alternate)
      // Hack to workaround the fact that safari doesn't
      // properly recolor the scrollbar when toggling (#1455)
      if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
        manageTransitions("body", false);
        window.scrollTo(0, 1);
        setTimeout(() => {
          window.scrollTo(0, 0);
          manageTransitions("body", true);
        }, 40);
      }
    }
    const disableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        stylesheet.rel = 'disabled-stylesheet';
      }
    }
    const enableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        if(stylesheet.rel !== 'stylesheet') { // for Chrome, which will still FOUC without this check
          stylesheet.rel = 'stylesheet';
        }
      }
    }
    const manageTransitions = (selector, allowTransitions) => {
      const els = window.document.querySelectorAll(selector);
      for (let i=0; i < els.length; i++) {
        const el = els[i];
        if (allowTransitions) {
          el.classList.remove('notransition');
        } else {
          el.classList.add('notransition');
        }
      }
    }
    const isFileUrl = () => {
      return window.location.protocol === 'file:';
    }
    const hasAlternateSentinel = () => {
      let styleSentinel = getColorSchemeSentinel();
      if (styleSentinel !== null) {
        return styleSentinel === "alternate";
      } else {
        return false;
      }
    }
    const setStyleSentinel = (alternate) => {
      const value = alternate ? "alternate" : "default";
      if (!isFileUrl()) {
        window.localStorage.setItem("quarto-color-scheme", value);
      } else {
        localAlternateSentinel = value;
      }
    }
    const getColorSchemeSentinel = () => {
      if (!isFileUrl()) {
        const storageValue = window.localStorage.getItem("quarto-color-scheme");
        return storageValue != null ? storageValue : localAlternateSentinel;
      } else {
        return localAlternateSentinel;
      }
    }
    const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
      const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
      const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
      let newTheme = '';
      if(authorPrefersDark) {
        newTheme = isAlternate ? baseTheme : alternateTheme;
      } else {
        newTheme = isAlternate ? alternateTheme : baseTheme;
      }
      const changeGiscusTheme = () => {
        // From: https://github.com/giscus/giscus/issues/336
        const sendMessage = (message) => {
          const iframe = document.querySelector('iframe.giscus-frame');
          if (!iframe) return;
          iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
        }
        sendMessage({
          setConfig: {
            theme: newTheme
          }
        });
      }
      const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
      if (isGiscussLoaded) {
        changeGiscusTheme();
      }
    };
    const authorPrefersDark = false;
    const darkModeDefault = authorPrefersDark;
      document.querySelector('link#quarto-text-highlighting-styles.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
      document.querySelector('link#quarto-bootstrap.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
    let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
    // Dark / light mode switch
    window.quartoToggleColorScheme = () => {
      // Read the current dark / light value
      let toAlternate = !hasAlternateSentinel();
      toggleColorMode(toAlternate);
      setStyleSentinel(toAlternate);
      toggleGiscusIfUsed(toAlternate, darkModeDefault);
      window.dispatchEvent(new Event('resize'));
    };
    // Switch to dark mode if need be
    if (hasAlternateSentinel()) {
      toggleColorMode(true);
    } else {
      toggleColorMode(false);
    }
  </script>

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./conceptual-foundations.html">Foundations: Programming and Abstractions</a></li><li class="breadcrumb-item"><a href="./foundations-of-programming.html"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Elements of Programming</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Modern Financial Modeling</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./copyright.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Copyright</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dedication.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Dedication</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./purchase.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Purchase Print Edition</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./why-program.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Why Program?</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./why-julia.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Why use Julia?</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./foundations-financial.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Foundations: Effective Financial Modeling</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./elements-of-financial-modeling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Elements of Financial Modeling</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./financial-modeling-practice.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">The Practice of Financial Modeling</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./conceptual-foundations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Foundations: Programming and Abstractions</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./foundations-of-programming.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Elements of Programming</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./first-abstractions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Functional Abstractions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./type-abstractions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Data and Types</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./patterns-abstraction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Higher Levels of Abstraction</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./conceptual-foundations2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Foundations: Building Performant Models</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./hardware.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Hardware and Its Implications</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./performance-single.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Writing Performant Single-Threaded Code</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./parallelization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Parallelization</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./computational-thinking.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Interdisciplinary Concepts and Applications</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./software.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Applying Software Engineering Practices</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./elements-of-compsci.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Elements of Computer Science</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./statistics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Statistical Inference and Information Theory</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stochastic.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Stochastic Modeling</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./autodiff.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Automatic Differentiation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./optimization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Optimization</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./visualization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Visualizations</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./matrices.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Matrices and Their Uses</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data-learning.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Learning from Data</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./julia-development.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Developing in Julia</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./julia-writing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Writing Julia Code</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./julia-debugging.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Troubleshooting Julia Code</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./julia-sharing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Distributing and Sharing Julia Code</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./julia-optimizing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Optimizing Julia Code</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./applications.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Applied Financial Modeling Techniques</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./scenario-generation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Scenario Generation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./similarity-calculation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Similarity Analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./portfolio-optimization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Portfolio Optimization</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./sensitivity-analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">Sensitivity Analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./autodiff_alm.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Automatic Differentiation for Asset Liability Management</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stochastic-mortality.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">Stochastic Mortality Projections</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./bayesian-mortality.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">31</span>&nbsp; <span class="chapter-title">Bayesian Mortality Modeling</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./other-techniques.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">32</span>&nbsp; <span class="chapter-title">More Useful Techniques</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./appendices.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ecosystem.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">33</span>&nbsp; <span class="chapter-title">The Julia Ecosystem for Financial Modeling</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./book-index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Index</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#chapter-overview" id="toc-chapter-overview" class="nav-link active" data-scroll-target="#chapter-overview"><span class="header-section-number">5.1</span> Chapter Overview</a></li>
  <li><a href="#computer-science-programming-and-coding" id="toc-computer-science-programming-and-coding" class="nav-link" data-scroll-target="#computer-science-programming-and-coding"><span class="header-section-number">5.2</span> Computer Science, Programming, and Coding</a></li>
  <li><a href="#expressions-and-control-flow" id="toc-expressions-and-control-flow" class="nav-link" data-scroll-target="#expressions-and-control-flow"><span class="header-section-number">5.3</span> Expressions and Control Flow</a>
  <ul class="collapse">
  <li><a href="#naming-values-with-variables" id="toc-naming-values-with-variables" class="nav-link" data-scroll-target="#naming-values-with-variables"><span class="header-section-number">5.3.1</span> Naming Values with Variables</a></li>
  <li><a href="#expressions" id="toc-expressions" class="nav-link" data-scroll-target="#expressions"><span class="header-section-number">5.3.2</span> Expressions</a></li>
  <li><a href="#sec-equality" id="toc-sec-equality" class="nav-link" data-scroll-target="#sec-equality"><span class="header-section-number">5.3.3</span> Equality</a></li>
  <li><a href="#sec-assignment" id="toc-sec-assignment" class="nav-link" data-scroll-target="#sec-assignment"><span class="header-section-number">5.3.4</span> Assignment, References, and Mutability</a></li>
  <li><a href="#loops" id="toc-loops" class="nav-link" data-scroll-target="#loops"><span class="header-section-number">5.3.5</span> Loops</a></li>
  <li><a href="#performance-of-loops" id="toc-performance-of-loops" class="nav-link" data-scroll-target="#performance-of-loops"><span class="header-section-number">5.3.6</span> Performance of Loops</a></li>
  </ul></li>
  <li><a href="#sec-basic-data-types" id="toc-sec-basic-data-types" class="nav-link" data-scroll-target="#sec-basic-data-types"><span class="header-section-number">5.4</span> Data Types</a>
  <ul class="collapse">
  <li><a href="#sec-number-types" id="toc-sec-number-types" class="nav-link" data-scroll-target="#sec-number-types"><span class="header-section-number">5.4.1</span> Numbers</a></li>
  <li><a href="#type-hierarchy" id="toc-type-hierarchy" class="nav-link" data-scroll-target="#type-hierarchy"><span class="header-section-number">5.4.2</span> Type Hierarchy</a></li>
  <li><a href="#collections" id="toc-collections" class="nav-link" data-scroll-target="#collections"><span class="header-section-number">5.4.3</span> Collections</a></li>
  <li><a href="#sec-parametric-types" id="toc-sec-parametric-types" class="nav-link" data-scroll-target="#sec-parametric-types"><span class="header-section-number">5.4.4</span> Parametric Types</a></li>
  <li><a href="#types-for-things-not-there" id="toc-types-for-things-not-there" class="nav-link" data-scroll-target="#types-for-things-not-there"><span class="header-section-number">5.4.5</span> Types for things not there</a></li>
  <li><a href="#union-types" id="toc-union-types" class="nav-link" data-scroll-target="#union-types"><span class="header-section-number">5.4.6</span> Union Types</a></li>
  <li><a href="#sec-user-defined-types" id="toc-sec-user-defined-types" class="nav-link" data-scroll-target="#sec-user-defined-types"><span class="header-section-number">5.4.7</span> Creating User Defined Types</a></li>
  <li><a href="#mutable-structs" id="toc-mutable-structs" class="nav-link" data-scroll-target="#mutable-structs"><span class="header-section-number">5.4.8</span> Mutable structs</a></li>
  <li><a href="#sec-constructors" id="toc-sec-constructors" class="nav-link" data-scroll-target="#sec-constructors"><span class="header-section-number">5.4.9</span> Constructors</a></li>
  </ul></li>
  <li><a href="#functions" id="toc-functions" class="nav-link" data-scroll-target="#functions"><span class="header-section-number">5.5</span> Functions</a>
  <ul class="collapse">
  <li><a href="#special-operators" id="toc-special-operators" class="nav-link" data-scroll-target="#special-operators"><span class="header-section-number">5.5.1</span> Special Operators</a></li>
  <li><a href="#sec-functions" id="toc-sec-functions" class="nav-link" data-scroll-target="#sec-functions"><span class="header-section-number">5.5.2</span> Defining Functions</a></li>
  <li><a href="#sec-methods" id="toc-sec-methods" class="nav-link" data-scroll-target="#sec-methods"><span class="header-section-number">5.5.3</span> Defining Methods on Types</a></li>
  <li><a href="#keyword-arguments" id="toc-keyword-arguments" class="nav-link" data-scroll-target="#keyword-arguments"><span class="header-section-number">5.5.4</span> Keyword Arguments</a></li>
  <li><a href="#default-arguments" id="toc-default-arguments" class="nav-link" data-scroll-target="#default-arguments"><span class="header-section-number">5.5.5</span> Default Arguments</a></li>
  <li><a href="#sec-anonymous-functions" id="toc-sec-anonymous-functions" class="nav-link" data-scroll-target="#sec-anonymous-functions"><span class="header-section-number">5.5.6</span> Anonymous Functions</a></li>
  <li><a href="#first-class-nature" id="toc-first-class-nature" class="nav-link" data-scroll-target="#first-class-nature"><span class="header-section-number">5.5.7</span> First Class Nature</a></li>
  <li><a href="#broadcasting" id="toc-broadcasting" class="nav-link" data-scroll-target="#broadcasting"><span class="header-section-number">5.5.8</span> Broadcasting</a></li>
  <li><a href="#sec-pass-by-sharing" id="toc-sec-pass-by-sharing" class="nav-link" data-scroll-target="#sec-pass-by-sharing"><span class="header-section-number">5.5.9</span> Passing by Sharing</a></li>
  <li><a href="#the-function-type" id="toc-the-function-type" class="nav-link" data-scroll-target="#the-function-type"><span class="header-section-number">5.5.10</span> The Function Type</a></li>
  </ul></li>
  <li><a href="#sec-scope" id="toc-sec-scope" class="nav-link" data-scroll-target="#sec-scope"><span class="header-section-number">5.6</span> Scope</a>
  <ul class="collapse">
  <li><a href="#modules-and-namespaces" id="toc-modules-and-namespaces" class="nav-link" data-scroll-target="#modules-and-namespaces"><span class="header-section-number">5.6.1</span> Modules and Namespaces</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">


<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./conceptual-foundations.html">Foundations: Programming and Abstractions</a></li><li class="breadcrumb-item"><a href="./foundations-of-programming.html"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Elements of Programming</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span id="sec-elements-programming" class="quarto-section-identifier"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Elements of Programming</span></span></h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Alec Loudenback </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<blockquote class="blockquote">
<p>“Programming is not about typing, it’s about thinking.” — Rich Hickey (2011)</p>
</blockquote>
<section id="chapter-overview" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="chapter-overview"><span class="header-section-number">5.1</span> Chapter Overview</h2>
<p>Here we start building up computer science concepts by introducing tangible programming essentials: data types, variables, control flow, functions, and scope.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>On Your First Read-through
</div>
</div>
<div class="callout-body-container callout-body">
<p>This chapter is intended to be an introductory reference for most of the basic building blocks upon which we will build abstractions in the chapters that follow. We want this chapter to essentially be an easy and mildly opinionated stepping-stone on your journey.</p>
<p>At some point, you will likely find yourself seeking more precise or thorough documentation and will directly search or read the documentation of a language or library itself. However, it may be intimidating or frustrating reading reference documentation due to the density and terminology while so many concepts are new. Let this chapter (and book, writ large) be a bridge for you.</p>
<p>If reading this book in a linear fashion and new to programming, we suggest skipping the following sections and returning when encountering the concept or term later in the book:</p>
<ul>
<li><a href="#sec-parametric-types" class="quarto-xref"><span>Section 5.4.4</span></a> through <a href="#sec-constructors" class="quarto-xref"><span>Section 5.4.9</span></a> which covers advanced and custom data types</li>
<li>After <a href="#sec-methods" class="quarto-xref"><span>Section 5.5.3</span></a> which deals with advanced function usage and program organization via scope</li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Caution
</div>
</div>
<div class="callout-body-container callout-body">
<p>This introductory chapter is intended to provide a survey of the important concepts and building blocks, not to be a complete reference. For full details on available functions, more complete definitions, and a more complete tour of all language features, see the Manual at <a href="https://docs.julialang.org">docs.julialang.org</a>.</p>
</div>
</div>
</section>
<section id="computer-science-programming-and-coding" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="computer-science-programming-and-coding"><span class="header-section-number">5.2</span> Computer Science, Programming, and Coding</h2>
<p><strong>Computer Science</strong> is the study of computing and information. As a science, it is distinct from programming languages which are merely coarse implementations of specific computer science concepts<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>.</p>
<p><strong>Programming</strong> (or <strong>“coding”</strong>) is the art and science of writing code in programming languages to have the computer perform desired tasks. While this may sound mechanistic, programming truly is one of the highest forms of abstract thinking. The design space of potential solutions is so large and potentially complex that much art and experience is needed to create a well-made program.</p>
<p>The language of computer science also provides a lexicon so that financial practitioners can discuss model architecture and characteristics of problems with precision and clarity. Simply having additional terminology and language to describe a concept illuminates aspects of the problem in new ways, opening oneself up to more innovative solutions.</p>
<p>In this light, the financial modeling we do can be considered a type of computer program. It takes abstract information (data) as input, performs calculations (an algorithm), and returns new data as output. We generally don’t need to consider things a software engineer might contemplate—graphical user interfaces, networking, or access restrictions. But the programming fundamentals are there: a good financial modeler must understand data types, algorithms, and some hardware details. Those fundamentals ultimately determine whether a nested solvency routine finishes before dawn or whether a pricing service can evaluate thousands of instruments per second.</p>
<p>We will build up the concepts over this and the following chapter:</p>
<ul>
<li>This chapter will provide a survey of important concepts in computer science that will prove useful for our financial modeling. First, we will talk about data types, boolean logic, and basic expressions. We’ll build on those to discuss algorithms (functions) which perform useful work and use control flow and recursion.</li>
<li>In the following chapters about abstraction, we will step back and discuss higher level concepts: the “schools of thought” around organizing the relationship between data and functions (functional versus object-oriented programming), design patterns, computational complexity, and compilation.</li>
</ul>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>There will be brief references to hardware considerations for completeness, but hardware knowledge is not necessary to understand most programming languages (including Julia). It’s impossible to completely avoid talking about hardware when you care about the performance of your code, so feel free to gloss over the reference to hardware details on the first read and come back later after <a href="hardware.html" class="quarto-xref"><span>Chapter 9</span></a>.</p>
</div>
</div>
<p>It’s highly recommended that you follow along and have a Julia session open (e.g.&nbsp;a REPL or a notebook) when first going through this chapter. See the first part of <a href="julia-writing.html" class="quarto-xref"><span>Chapter 21</span></a> if you haven’t gotten that set up yet. Follow along with the examples as we go.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>You can get some help in the REPL by typing a <code>?</code> followed by the symbol you want help with, for example:</p>
<pre class="julia-repl"><code> help?&gt; sum
search: sum sum! summary cumsum cumsum! ...

  sum(f, itr; [init])


  Sum the results of calling function f on each element of itr.

... More text truncated...</code></pre>
</div>
</div>
</section>
<section id="expressions-and-control-flow" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="expressions-and-control-flow"><span class="header-section-number">5.3</span> Expressions and Control Flow</h2>
<section id="naming-values-with-variables" class="level3" data-number="5.3.1">
<h3 data-number="5.3.1" class="anchored" data-anchor-id="naming-values-with-variables"><span class="header-section-number">5.3.1</span> Naming Values with Variables</h3>
<p>One of the first things it will be convenient to understand is the concept of variables. In virtually every programming language, we can assign values to make our program more organized and meaningful to the human reader. In the following example, we assign values to intermediate symbols to benefit us humans as we convert (silly!) American distance units:</p>
<div id="2" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>feet_per_yard <span class="op">=</span> <span class="fl">3</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>yards_per_mile <span class="op">=</span> <span class="fl">1760</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>feet <span class="op">=</span> <span class="fl">3000</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>miles <span class="op">=</span> feet <span class="op">/</span> feet_per_yard <span class="op">/</span> yards_per_mile</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>0.5681818181818182</code></pre>
</div>
</div>
<p>The above is technically the same thing as just computing <code>3000 / 3 / 1760</code>, however we’ve given the elements names meaningful to the human user.</p>
<p>Beyond readability, variables are a form of <strong>abstraction</strong> which allows us to think beyond specific instances of data and numbers to a more general representation. For example, the last line in the prior code example is a very generic computation of a unit conversion relationship and <code>feet</code> could be any number and the expression remains a valid calculation.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>We will dive a little bit deeper into variables and assignment in <a href="#sec-assignment" class="quarto-xref"><span>Section 5.3.4</span></a>, distinguishing between assignment and references.</p>
</div>
</div>
</section>
<section id="expressions" class="level3" data-number="5.3.2">
<h3 data-number="5.3.2" class="anchored" data-anchor-id="expressions"><span class="header-section-number">5.3.2</span> Expressions</h3>
<p>Within the code examples above, we can zoom in onto small pieces of code called <strong>expressions</strong>. Expressions are effectively the basic block of code that gets evaluated to produce a value. Here is an expression that adds two integers together that evaluate to a new integer (<code>3</code> in this case):</p>
<div id="4" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fl">1</span> <span class="op">+</span> <span class="fl">2</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>3</code></pre>
</div>
</div>
<p>A bigger program is built up of many of these smaller bits of code.</p>
<section id="compound-expression" class="level4" data-number="5.3.2.1">
<h4 data-number="5.3.2.1" class="anchored" data-anchor-id="compound-expression"><span class="header-section-number">5.3.2.1</span> Compound Expression</h4>
<p>There are two kinds of blocks where we can ensure that sub-expressions get evaluated in order and return the last expression as the overall return value: <code>begin</code> and <code>let</code> blocks.</p>
<div id="6" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>c <span class="op">=</span> <span class="cf">begin</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    a <span class="op">=</span> <span class="fl">3</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    b <span class="op">=</span> <span class="fl">4</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    a <span class="op">+</span> b</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>a, b, c</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>(3, 4, 7)</code></pre>
</div>
</div>
<p>Alternatively, you can chain together <code>;</code>s to create a compound expression:</p>
<div id="8" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>z <span class="op">=</span> (x <span class="op">=</span> <span class="fl">1</span>; y <span class="op">=</span> <span class="fl">2</span>; x <span class="op">+</span> y)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>3</code></pre>
</div>
</div>
<p>Compound expressions allow you to group multiple operations together while still having the entire block evaluate to a single value, typically the last expression. This makes it easy to use complex logic anywhere a value is needed, like in function arguments or assignments.</p>
<p><code>let</code> blocks define variables within its scope and cannot be accessed outside that scope. More on scope in <a href="#sec-scope" class="quarto-xref"><span>Section 5.6</span></a>.</p>
<div id="10" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>c <span class="op">=</span> <span class="kw">let</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    g <span class="op">=</span> <span class="fl">3</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    h <span class="op">=</span> <span class="fl">4</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    g <span class="op">+</span> h</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="pp">@show</span> c</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="pp">@show</span> g</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>c = 7</code></pre>
</div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre>UndefVarError: `g` not defined in `Main.Notebook`
Suggestion: check for spelling errors or missing imports.
Stacktrace:
 [1] top-level scope
<span class="ansi-bright-black-fg">   @</span> <span class="ansi-bright-black-fg">~/prog/julia-fin-book/</span><span style="text-decoration:underline" class="ansi-bright-black-fg">foundations-of-programming.qmd:135</span></pre>
</div>
</div>
</div>
</section>
<section id="conditional-expressions" class="level4" data-number="5.3.2.2">
<h4 data-number="5.3.2.2" class="anchored" data-anchor-id="conditional-expressions"><span class="header-section-number">5.3.2.2</span> Conditional Expressions</h4>
<p><strong>Conditionals</strong> are expressions that evaluate to a <strong>boolean</strong> <code>true</code> or <code>false</code>. This is the beginning of really being able to assemble complex logic to perform useful work. Here are a handful of expressions that would evaluate to <code>true</code>:</p>
<div id="12" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fl">1</span> <span class="op">&gt;</span> <span class="fl">0</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fl">1</span> <span class="op">==</span> <span class="fl">1</span> <span class="co"># check for equality</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="fl">1.0</span> isa <span class="dt">Float64</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>(<span class="fl">5</span> <span class="op">&gt;</span> <span class="fl">0</span>) <span class="op">&amp;</span> (<span class="op">-</span><span class="fl">1</span> <span class="op">&lt;</span> <span class="fl">2</span>) <span class="co"># "and" expression</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>(<span class="fl">5</span> <span class="op">&gt;</span> <span class="fl">0</span>) <span class="op">|</span> (<span class="op">-</span><span class="fl">1</span> <span class="op">&gt;</span> <span class="fl">2</span>) <span class="co"># "or" expression</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="fl">1</span> <span class="op">!=</span> <span class="fl">2</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>true</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>In Julia, the booleans have an integer equality: <code>true</code> is equal to <code>1</code> (<code>true == 1</code>) and <code>false</code> is equal to <code>0</code> (<code>false == 0</code>).</p>
<p>However, <code>true != 5</code>. Only <code>1</code> is equal to <code>true</code> via <code>==</code> (in some languages, any non-zero number is “truthy”). Note that <code>true === 1</code> is <code>false</code> because they are different types.</p>
</div>
</div>
<p>Conditionals can be used to assemble different logical paths for the program to follow and the general pattern is an <code>if</code> block:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb14"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> condition</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># do one thing</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="cf">elseif</span> condition</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># do something else</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># do something if none of the </span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># other conditions are met</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>A complete example:</p>
<div id="14" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">buy_or_sell</span>(my_value, market_price)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> my_value <span class="op">&gt;</span> market_price</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>        <span class="st">"buy more"</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elseif</span> my_value <span class="op">&lt;</span> market_price</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">"sell"</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>        <span class="st">"hold"</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a><span class="fu">buy_or_sell</span>(<span class="fl">10</span>, <span class="fl">15</span>), <span class="fu">buy_or_sell</span>(<span class="fl">15</span>, <span class="fl">10</span>), <span class="fu">buy_or_sell</span>(<span class="fl">10</span>, <span class="fl">10</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>("sell", "buy more", "hold")</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Advanced: Short Circuiting Operator
</div>
</div>
<div class="callout-body-container callout-body">
<p>Julia has short-circuiting boolean operators that avoid evaluating the right-hand side when it isn’t needed:</p>
<ul>
<li><code>a &amp;&amp; b</code> evaluates <code>b</code> only if <code>a</code> is <code>true</code></li>
<li><code>a || b</code> evaluates <code>b</code> only if <code>a</code> is <code>false</code></li>
</ul>
<div id="16" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">bigger_than_and_print</span>(a, b)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">println</span>(<span class="st">"comparing </span><span class="sc">$</span>a<span class="st"> and </span><span class="sc">$</span>b<span class="st">"</span>)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>    a <span class="op">&gt;</span> b</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>(<span class="fl">5</span> <span class="op">&gt;</span> <span class="fl">0</span>) <span class="op">&amp;&amp;</span> <span class="fu">bigger_than_and_print</span>(<span class="fl">5</span>, <span class="fl">7</span>)  <span class="co"># prints, returns false</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>(<span class="fl">5</span> <span class="op">&lt;</span> <span class="fl">0</span>) <span class="op">&amp;&amp;</span> <span class="fu">bigger_than_and_print</span>(<span class="fl">5</span>, <span class="fl">7</span>)  <span class="co"># skips RHS, returns false</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>(<span class="fl">5</span> <span class="op">&gt;</span> <span class="fl">0</span>) <span class="op">||</span> <span class="fu">bigger_than_and_print</span>(<span class="fl">5</span>, <span class="fl">7</span>)  <span class="co"># skips RHS, returns true</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>(<span class="fl">5</span> <span class="op">&lt;</span> <span class="fl">0</span>) <span class="op">||</span> <span class="fu">bigger_than_and_print</span>(<span class="fl">5</span>, <span class="fl">7</span>)  <span class="co"># prints, returns false</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>comparing 5 and 7
comparing 5 and 7</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>false</code></pre>
</div>
</div>
<p>By contrast, <code>&amp;</code> and <code>|</code> are non–short-circuit (bitwise/logical) and always evaluate both sides:</p>
<div id="18" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>(<span class="fl">5</span> <span class="op">&gt;</span> <span class="fl">0</span>) <span class="op">&amp;</span> <span class="fu">bigger_than_and_print</span>(<span class="fl">5</span>, <span class="fl">7</span>)   <span class="co"># prints, returns false</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>(<span class="fl">5</span> <span class="op">&lt;</span> <span class="fl">0</span>) <span class="op">|</span> <span class="fu">bigger_than_and_print</span>(<span class="fl">5</span>, <span class="fl">7</span>)   <span class="co"># prints, returns false</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>comparing 5 and 7
comparing 5 and 7</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>false</code></pre>
</div>
</div>
<p>This matters for performance and safety:</p>
<div id="20" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb23"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="cn">false</span> <span class="op">&amp;&amp;</span> <span class="fu">error</span>(<span class="st">"boom"</span>)  <span class="co"># no error (RHS skipped)</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="cn">false</span> <span class="op">&amp;</span> <span class="fu">error</span>(<span class="st">"boom"</span>)  <span class="co"># ERROR: boom</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre>boom
Stacktrace:
 [1] <span class="ansi-bold">error</span><span class="ansi-bold">(</span><span class="ansi-bright-black-fg">s</span>::String<span class="ansi-bold">)</span>
<span class="ansi-bright-black-fg">   @</span> <span class="ansi-bright-black-fg">Base</span> <span class="ansi-bright-black-fg">./</span><span style="text-decoration:underline" class="ansi-bright-black-fg">error.jl:44</span>
 [2] top-level scope
<span class="ansi-bright-black-fg">   @</span> <span class="ansi-bright-black-fg">~/prog/julia-fin-book/</span><span style="text-decoration:underline" class="ansi-bright-black-fg">foundations-of-programming.qmd:220</span></pre>
</div>
</div>
</div>
<p>Tips:</p>
<ul>
<li>Use <code>&amp;&amp;</code> and <code>||</code> for control flow on <code>Bool</code> values</li>
<li>With arrays, use broadcasting: <code>.&amp;</code> and <code>.|</code> (not <code>&amp;&amp;</code>/<code>||</code>)</li>
<li>With <code>missing</code> data, <code>&amp;&amp;</code>/<code>||</code> require <code>Bool</code> and will error; <code>&amp;</code> and <code>|</code> propagate <code>missing</code></li>
</ul>
</div>
</div>
</section>
</section>
<section id="sec-equality" class="level3" data-number="5.3.3">
<h3 data-number="5.3.3" class="anchored" data-anchor-id="sec-equality"><span class="header-section-number">5.3.3</span> Equality</h3>
<p>The “Ship of Theseus problem”<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> is an example of how equality can be a philosophically complex concept. In computer science we have the advantage that while we may not be able to resolve what’s the “right” type of equality, we can be more precise about it.</p>
<p>Here is an example for which we can see the difference between two types of equality:</p>
<ul>
<li><p><strong>Egal</strong> equality is when a program could not distinguish between two objects at all</p></li>
<li><p><strong>Equal</strong> equality is when the values of two objects are the same</p></li>
</ul>
<p>If two things are egal, then they are also equal.</p>
<p>In the following example, <code>s</code> and <code>t</code> are equal but not egal:</p>
<div id="22" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb24"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> [<span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>]</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>t <span class="op">=</span> [<span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>]</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>s <span class="op">==</span> t, s <span class="op">===</span> t</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>(true, false)</code></pre>
</div>
</div>
<p>One way to think about this is that while the values are equal, there is a way that one of the arrays could be made not equal to the other:</p>
<div id="24" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb26"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>t[<span class="fl">2</span>] <span class="op">=</span> <span class="fl">5</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>t</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>3-element Vector{Int64}:
 1
 5
 3</code></pre>
</div>
</div>
<p>Now <code>t</code> is no longer equal to <code>s</code>:</p>
<div id="26" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb28"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>s <span class="op">==</span> t</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>false</code></pre>
</div>
</div>
<p>The reason this happens is that arrays are containers that can have their contents modified. Even though they originally had the same values, <code>s</code> and <code>t</code> are different containers, and <em>it just so happened</em> that the values they contained started out the same.</p>
<p>Some data can’t be modified, including some kinds of collections. Immutable types like the following tuple, with the same stored values, are egal because there is no way for us to make them different:</p>
<div id="28" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb30"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>(<span class="fl">2</span>, <span class="fl">4</span>) <span class="op">===</span> (<span class="fl">2</span>, <span class="fl">4</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>true</code></pre>
</div>
</div>
<p>Using this terminology, we could now interpret the “Ship of Theseus” as that his ship is “equal” but not “egal”.</p>
</section>
<section id="sec-assignment" class="level3" data-number="5.3.4">
<h3 data-number="5.3.4" class="anchored" data-anchor-id="sec-assignment"><span class="header-section-number">5.3.4</span> Assignment, References, and Mutability</h3>
<p>When we say <code>x = 2</code> we are <strong>assigning</strong> the integer value of <code>2</code> to the variable <code>x</code>. This is an expression that lets us bind a value to a variable so that it can be referenced more concisely or in different parts of our code. When we re-assign the variable we are not mutating the value: <code>x = 3</code> does not change the <code>2</code>.</p>
<p>When we have a mutable object (e.g.&nbsp;an <code>Array</code> or a <code>mutable struct</code>), we can mutate the value inside the referenced container. For example:</p>
<div id="30" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="annotated-cell-13"><pre class="sourceCode julia code-annotation-code code-with-copy code-annotated"><code class="sourceCode julia"><a class="code-annotation-anchor" data-target-cell="annotated-cell-13" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-13-1" class="code-annotation-target"><a href="#annotated-cell-13-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> [<span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>]</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-13" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-13-2" class="code-annotation-target"><a href="#annotated-cell-13-2" aria-hidden="true" tabindex="-1"></a>x[<span class="fl">1</span>] <span class="op">=</span> <span class="fl">5</span></span>
<span id="annotated-cell-13-3"><a href="#annotated-cell-13-3" aria-hidden="true" tabindex="-1"></a>x</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-13" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-13" data-code-lines="1" data-code-annotation="1"><code>x</code> refers to the array which currently contains the elements <code>1</code>, <code>2</code>, and <code>3</code>.</span>
</dd>
<dt data-target-cell="annotated-cell-13" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-13" data-code-lines="2" data-code-annotation="2">We re-assign the first element of the array to be the value <code>5</code> instead of <code>1</code></span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>3-element Vector{Int64}:
 5
 2
 3</code></pre>
</div>
</div>
<p>In the above example, <code>x</code> has not been reassigned. It is possible for two variables to refer to the same object:</p>
<div id="32" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="annotated-cell-14"><pre class="sourceCode julia code-annotation-code code-with-copy code-annotated"><code class="sourceCode julia"><span id="annotated-cell-14-1"><a href="#annotated-cell-14-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> [<span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>]</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-14" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-14-2" class="code-annotation-target"><a href="#annotated-cell-14-2" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> x</span>
<span id="annotated-cell-14-3"><a href="#annotated-cell-14-3" aria-hidden="true" tabindex="-1"></a>x[<span class="fl">1</span>] <span class="op">=</span> <span class="fl">6</span></span>
<span id="annotated-cell-14-4"><a href="#annotated-cell-14-4" aria-hidden="true" tabindex="-1"></a>y</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-14" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-14" data-code-lines="2" data-code-annotation="1"><code>y</code> refers to the <em>same</em> underlying array as <code>x</code></span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>3-element Vector{Int64}:
 6
 2
 3</code></pre>
</div>
</div>
<p>Note that variables can be freely re-assigned. Marking a variable as <code>const</code> signals that it should not be re-assigned and enables compiler optimizations:</p>
<pre id="annotated-cell-15" class="code-annotation-code"><code>const TAU =  π * 2</code></pre>
<dl>
<dt data-target-cell="annotated-cell-15" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-15" data-code-lines="1" data-code-annotation="1">Capitalizing constant variables is a convention in Julia.</span>
</dd>
</dl>
<p>In an interactive session, Julia will allow reassignment of a <code>const</code> with a warning, but in compiled code this is not permitted.</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>Note that if we declare a <code>const</code> variable that refers to a mutable container like an array, the container can still be mutated. It’s the reference to the container that remains constant, not necessarily the elements within the container.</p>
<p>For example, while <code>MY_ARRAY</code> will point always to the same array, the array itself can get mutated</p>
<div id="34" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb34"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> MY_ARRAY <span class="op">=</span> [<span class="fl">1</span>, <span class="fl">2</span>]</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>MY_ARRAY[<span class="fl">1</span>] <span class="op">=</span> <span class="fl">99</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>MY_ARRAY</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>2-element Vector{Int64}:
 99
  2</code></pre>
</div>
</div>
<p>Being explicit about whether you copied a container or merely referenced it is crucial in model code: mutating a shared array of discount factors by accident can change results elsewhere in the valuation chain. When in doubt, create an explicit copy with <code>copy</code> or work with immutable structures.</p>
</div>
</div>
</section>
<section id="loops" class="level3" data-number="5.3.5">
<h3 data-number="5.3.5" class="anchored" data-anchor-id="loops"><span class="header-section-number">5.3.5</span> Loops</h3>
<p><strong>Loops</strong> are ways for the program to move through a program and repeat expressions while we want it to. There are two primary loops: <code>for</code> and <code>while</code> .</p>
<p><strong><code>for</code> loops</strong> are loops that iterate over a defined range or set of values. Let’s assume that we have the array <code>v = [6,7,8]</code>. Here are multiple examples of using a <code>for</code> loop in order to print each value to output (<code>println</code>):</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb36"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>v <span class="op">=</span> [<span class="fl">6</span>,<span class="fl">7</span>,<span class="fl">8</span>]</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="co"># use fixed indices</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">println</span>(v[i])</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb37"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># use the indices of the array</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="fu">eachindex</span>(v)</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">println</span>(v[i])</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb38"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># use the elements of the array</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> x <span class="kw">in</span> v</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">println</span>(x)</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb39"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># use the elements of the array</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> x <span class="op">∈</span> v          <span class="co"># ∈ is typed \in&lt;tab&gt;</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">println</span>(x)</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong><code>while</code> loops</strong> will run repeatedly until an expression is false. Here’s some examples of printing each value of <code>v</code> again:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="annotated-cell-20"><pre class="sourceCode julia code-annotation-code code-with-copy code-annotated"><code class="sourceCode julia"><span id="annotated-cell-20-1"><a href="#annotated-cell-20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># index the array</span></span>
<span id="annotated-cell-20-2"><a href="#annotated-cell-20-2" aria-hidden="true" tabindex="-1"></a>i <span class="op">=</span> <span class="fl">1</span></span>
<span id="annotated-cell-20-3"><a href="#annotated-cell-20-3" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> i <span class="op">&lt;=</span> <span class="fu">length</span>(v) </span>
<span id="annotated-cell-20-4"><a href="#annotated-cell-20-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">println</span>(v[i])</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-20" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-20-5" class="code-annotation-target"><a href="#annotated-cell-20-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">global</span> i <span class="op">+=</span> <span class="fl">1</span></span>
<span id="annotated-cell-20-6"><a href="#annotated-cell-20-6" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-20" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-20" data-code-lines="5" data-code-annotation="1"><code>global</code> is used to increment <code>i</code> by 1. <code>i</code> is defined outside the scope of the <code>while</code> loop (see <a href="#sec-scope" class="quarto-xref"><span>Section 5.6</span></a>).</span>
</dd>
</dl>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="annotated-cell-21"><pre class="sourceCode julia code-annotation-code code-with-copy code-annotated"><code class="sourceCode julia"><span id="annotated-cell-21-1"><a href="#annotated-cell-21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># index the array</span></span>
<span id="annotated-cell-21-2"><a href="#annotated-cell-21-2" aria-hidden="true" tabindex="-1"></a>i <span class="op">=</span> <span class="fl">1</span></span>
<span id="annotated-cell-21-3"><a href="#annotated-cell-21-3" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> <span class="cn">true</span></span>
<span id="annotated-cell-21-4"><a href="#annotated-cell-21-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">println</span>(v[i])</span>
<span id="annotated-cell-21-5"><a href="#annotated-cell-21-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> i <span class="op">&gt;=</span> <span class="fu">length</span>(v)</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-21" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-21-6" class="code-annotation-target"><a href="#annotated-cell-21-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span></span>
<span id="annotated-cell-21-7"><a href="#annotated-cell-21-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="annotated-cell-21-8"><a href="#annotated-cell-21-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">global</span> i <span class="op">+=</span> <span class="fl">1</span> </span>
<span id="annotated-cell-21-9"><a href="#annotated-cell-21-9" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-21" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-21" data-code-lines="6" data-code-annotation="1"><code>break</code> is used to terminate the loop manually, since the condition that follows the <code>while</code> will never be false.</span>
</dd>
</dl>
</section>
<section id="performance-of-loops" class="level3" data-number="5.3.6">
<h3 data-number="5.3.6" class="anchored" data-anchor-id="performance-of-loops"><span class="header-section-number">5.3.6</span> Performance of Loops</h3>
<p>Loops are highly performant in Julia and often the fastest way to accomplish things. This contrasts with advice often given to Python or R users, where vectorized operations are heavily favored over loops for performance.</p>
</section>
</section>
<section id="sec-basic-data-types" class="level2" data-number="5.4">
<h2 data-number="5.4" class="anchored" data-anchor-id="sec-basic-data-types"><span class="header-section-number">5.4</span> Data Types</h2>
<p><strong>Data types</strong> categorize information by intrinsic characteristics. We instinctively know that <code>13.24</code> is different than <code>"this set of words"</code>—types are how we formalize this distinction. Mathematically, it’s like having different sets of objects to perform specialized operations on. Underneath this set-like abstraction are implementation details related to computer hardware. You probably know that computers only natively “speak” in binary zeros and ones. Data types are a primary way for a computer to know if it should interpret <code>01000010</code> as <code>B</code> or as <code>66</code><a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>.</p>
<p>Each <code>0</code> or <code>1</code> within a computer is called a <strong>bit</strong> and eight bits in a row form a <strong>byte</strong> (such as <code>01000010</code>). This is where we get terms like “gigabytes” or “kilobits per second” as a measure of the quantity or rate of bits something can handle<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a>.</p>
<section id="sec-number-types" class="level3" data-number="5.4.1">
<h3 data-number="5.4.1" class="anchored" data-anchor-id="sec-number-types"><span class="header-section-number">5.4.1</span> Numbers</h3>
<p>Numbers are usually grouped into two categories: <strong>integers</strong> and <strong>floating-point</strong><a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a> numbers. Integers are like the mathematical set of integers while floating-point is a way of representing decimal numbers. Both have some limitations since computers can only natively represent a finite set of numbers due to the hardware (more on this in <a href="hardware.html" class="quarto-xref"><span>Chapter 9</span></a>). Here are three integers that are input into the <strong>REPL</strong> (Read-Eval-Print-Loop)<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a> and the result is <strong>printed</strong> below the input:</p>
<div id="36" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb40"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fl">2</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>2</code></pre>
</div>
</div>
<div id="38" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb42"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fl">423</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>423</code></pre>
</div>
</div>
<div id="40" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb44"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fl">1929234</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>1929234</code></pre>
</div>
</div>
<p>And three floating-point numbers:</p>
<div id="42" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb46"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fl">0.2</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>0.2</code></pre>
</div>
</div>
<div id="44" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb48"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="op">-</span><span class="fl">23.3421</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>-23.3421</code></pre>
</div>
</div>
<div id="46" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb50"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fl">14e3</span>      <span class="co"># the same as 14,000.0</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>14000.0</code></pre>
</div>
</div>
<p>On most systems, <code>0.2</code> will be interpreted as a 64-bit floating point type called <code>Float64</code> in Julia. Unlike integers, floating-point literals are always <code>Float64</code> regardless of system architecture. Given that there are a finite amount of bits attempting to represent a continuous, infinite set of numbers means that some numbers are not able to be represented with perfect precision. For example, if we ask for <code>0.2</code>, the closest representations in 64 and 32 bit are:</p>
<ul>
<li><p><code>0.20000000298023223876953125</code> in 32-bit</p></li>
<li><p><code>0.200000000000000011102230246251565404236316680908203125</code> in 64-bit</p></li>
</ul>
<p>This leads to special considerations that computers take when performing calculations on floating point maths, some of which will be covered in more detail in <a href="hardware.html" class="quarto-xref"><span>Chapter 9</span></a>. For now, just note that floating point numbers have limited precision and even if we input <code>0.2</code>, your computations will use the above decimal representations even if it will print out a number with fewer digits shown:</p>
<div id="48" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="annotated-cell-28"><pre class="sourceCode julia code-annotation-code code-with-copy code-annotated"><code class="sourceCode julia"><a class="code-annotation-anchor" data-target-cell="annotated-cell-28" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-28-1" class="code-annotation-target"><a href="#annotated-cell-28-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> <span class="fl">0.2</span></span>
<span id="annotated-cell-28-2"><a href="#annotated-cell-28-2" aria-hidden="true" tabindex="-1"></a></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-28" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-28-3" class="code-annotation-target"><a href="#annotated-cell-28-3" aria-hidden="true" tabindex="-1"></a><span class="fu">big</span>(x)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-28" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-28" data-code-lines="1" data-code-annotation="1">Here, we <strong>assign</strong> the value <code>0.2</code> to a <strong>variable</strong> <code>x</code>. More on variables/assignments in <a href="#sec-assignment" class="quarto-xref"><span>Section 5.3.4</span></a>.</span>
</dd>
<dt data-target-cell="annotated-cell-28" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-28" data-code-lines="3" data-code-annotation="2"><code>big(x)</code> is an arbitrary precision floating point number and by default prints the full precision that was embedded in our variable <code>x</code>, which was originally <code>Float64</code>.</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>0.200000000000000011102230246251565404236316680908203125</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Note the difference in what printed between the last example and when we input <code>0.2</code> earlier in the chapter. The former had the same (not-exactly equal to <span class="math inline">\(0.2\)</span>) <em>value</em>, but it printed an abbreviated set of digits as a nicety for the user, who usually doesn’t want to look at floating point numbers with their full machine precision. The system has the full precision (<code>0.20...3125</code>) but is truncating the output.</p>
<p>In the last example, we’ve converted the normal <code>Float64</code> to a <code>BigFloat</code> which will not truncate the output when printing.</p>
</div>
</div>
<p>Integers are similarly represented as 32 or 64 bits (with <code>Int32</code> and <code>Int64</code>) and are limited to exact precision:</p>
<ul>
<li><p><code>Int32</code> range: −2,147,483,648 to 2,147,483,647</p></li>
<li><p><code>Int64</code> range: −9,223,372,036,854,775,808 to 9,223,372,036,854,775,807</p></li>
</ul>
<p>Additional range in the positive direction if one chooses to use “unsigned”, non-negative numbers (<code>UInt32</code> and <code>UInt64</code>). Unlike floating point numbers, the integers have a type <code>Int</code> which will use the system bit architecture by default (that is, <code>Int(30)</code> will create a 64 bit integer on 64-bit systems and 32-bit on 32-bit systems).</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Floating Point and Excel
</div>
</div>
<div class="callout-body-container callout-body">
<p>Excel’s numeric storage and routine is complex and not quite the same as most programming languages, which follow the Institute of Electrical and Electronics Engineer’s standards (such as the IEEE 754 standard for double precision floating point numbers). Excel uses IEEE for the <em>computations</em> but results (and therefore the cells that comprise many calculations interim values) are stored with 15 significant digits of information. In some ways this is the worst of both worlds: having the sometimes unusual (but well-defined) behavior of floating point arithmetic <em>and</em> having additional modifications to various steps of a calculation. In general, you can assume that the programming language result (following the IEEE 754 standard) is a better result because there are aspects to the IEEE 754 defines techniques to minimize issues that arise in floating point math. Some of the issues (round-off or truncation) can be amplified instead of minimized with Excel.</p>
<p>In practice, this means that it can be difficult to exactly replicate a calculation in Excel in a programming language and vice-versa. It’s best to try to validate a programming model versus Excel model using very small unit calculations (e.g.&nbsp;a single step or iteration of a routine) instead of an all-in result. You may need to define some tolerance threshold for comparison of a value that is the result of a long chain of calculation.</p>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Currencies and Decimals
</div>
</div>
<div class="callout-body-container callout-body">
<p>Due to the inherent imprecision of floating point numbers, they should <strong>not</strong> be used in storing financial transaction records! The trade-offs inherent in floating point math described above do not lend itself to accurate record-keeping. For example, in looking at summing up two products sold for $19.99 and $84.99, since floating point operations like <code>19.99 + 84.99</code> do not precisely equal <code>105.98</code>.</p>
<div id="50" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb53"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">BigFloat</span>(<span class="fl">19.99</span> <span class="op">+</span> <span class="fl">84.99</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>104.979999999999989768184605054557323455810546875</code></pre>
</div>
</div>
<p>See how the prior is slightly lower than <code>105.98</code> — if we were adding US Dollars here, our system would be off by fractions of a cent. Do that for millions of transactions in a day and you have a problem!</p>
<p>Generally, when doing <em>modeling</em> or even creating a <em>valuation model</em>, it’s okay to use floating point math. As an example, if you are trying to determine the value of an exotic option, your model is likely just fine outputting a value like <code>101.987087</code> . If you go and sell this option, you’ll have to settle for either <code>101.98</code> or <code>101.99</code> when booking it. In most contexts this imprecision is likely okay!</p>
<p>If you are implementing a transaction or trading system, ensure proper treatment of the types representing your monetary numbers. A full treatment is beyond the scope of this book, but for a good introduction to the subject, see <a href="https://cs-syd.eu/posts/2022-08-22-how-to-deal-with-money-in-software" class="uri">https://cs-syd.eu/posts/2022-08-22-how-to-deal-with-money-in-software</a>.</p>
</div>
</div>
</section>
<section id="type-hierarchy" class="level3" data-number="5.4.2">
<h3 data-number="5.4.2" class="anchored" data-anchor-id="type-hierarchy"><span class="header-section-number">5.4.2</span> Type Hierarchy</h3>
<p>We can describe a <em>hierarchy</em> of types. Both <code>Float64</code> and <code>Int64</code> are examples of <code>Real</code> numbers (here, <code>Real</code> is an <strong>abstract</strong> Julia type which corresponds to the mathematical set of real numbers commonly denoted with <span class="math inline">\(\mathbb{R}\)</span> ). Both <code>Float64</code> and <code>Int32</code> are <code>Real</code> numbers, so why not just define all numbers as a <code>Real</code> type? Because for performant calculations, the computer must know in advance how many bits each number is represented with.</p>
<p>We can use Julia to introspect its own type hierarchy:</p>
<div id="52" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb55"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">print_type_tree</span>(T<span class="op">::</span><span class="dt">Type</span>, indent<span class="op">=</span><span class="fl">0</span>)</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">println</span>(<span class="st">"  "</span><span class="op">^</span>indent <span class="op">*</span> <span class="fu">string</span>(T))</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> sub <span class="kw">in</span> <span class="fu">subtypes</span>(T)</span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">print_type_tree</span>(sub, indent <span class="op">+</span> <span class="fl">1</span>)</span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a><span class="fu">print_type_tree</span>(<span class="dt">Number</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Number
  Base.MultiplicativeInverses.MultiplicativeInverse
    Base.MultiplicativeInverses.SignedMultiplicativeInverse
    Base.MultiplicativeInverses.UnsignedMultiplicativeInverse
  Complex
  Real
    AbstractFloat
      BigFloat
      Core.BFloat16
      Float16
      Float32
      Float64
    AbstractIrrational
      Irrational
    Integer
      Bool
      Signed
        BigInt
        Int128
        Int16
        Int32
        Int64
        Int8
      Unsigned
        UInt128
        UInt16
        UInt32
        UInt64
        UInt8
    Rational</code></pre>
</div>
</div>
<p>The integer and floating point types described in the prior section are known as <strong>concrete</strong> types because there are no possible sub types (child types). Further, a concrete type can be a <strong>bit type</strong> if the data type will always have the same number of bits in memory: a <code>Float32</code> will always be 32 bits in memory, for example. Contrast this with strings (described below) which can contain an arbitrary number of characters.</p>
</section>
<section id="collections" class="level3" data-number="5.4.3">
<h3 data-number="5.4.3" class="anchored" data-anchor-id="collections"><span class="header-section-number">5.4.3</span> Collections</h3>
<p>Collections are types for storing data that contains many elements. This section describes some of the most common and useful types of containers.</p>
<section id="arrays" class="level4" data-number="5.4.3.1">
<h4 data-number="5.4.3.1" class="anchored" data-anchor-id="arrays"><span class="header-section-number">5.4.3.1</span> Arrays</h4>
<p>Arrays are the most common way to represent a collection of similar data. For example, we can represent a set of integers as follows:</p>
<div id="54" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb57"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>[<span class="fl">1</span>, <span class="fl">10</span>, <span class="fl">300</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>3-element Vector{Int64}:
   1
  10
 300</code></pre>
</div>
</div>
<p>And a floating point array:</p>
<div id="56" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb59"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>[<span class="fl">0.2</span>, <span class="fl">1.3</span>, <span class="fl">300.0</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>3-element Vector{Float64}:
   0.2
   1.3
 300.0</code></pre>
</div>
</div>
<p>Note the above two arrays are different types of arrays. The first is <code>Vector{Int64}</code> and the second is <code>Vector{Float64}</code>. These are arrays of concrete types and so Julia will know that each element of an array is the same amount of bits, which will enable more efficient computations. With the following set of mixed numbers, Julia will <strong>promote</strong> the integers to floating point since the integers can be accurately represented<a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a> in floating point.</p>
<div id="58" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb61"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>[<span class="fl">1</span>, <span class="fl">1.3</span>, <span class="fl">300.0</span>, <span class="fl">21</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>4-element Vector{Float64}:
   1.0
   1.3
 300.0
  21.0</code></pre>
</div>
</div>
<p>However, if we explicitly ask Julia to use a <code>Real</code>-typed array, the type is now <code>Vector{Real}</code>. Recall that <code>Real</code> is an abstract type. Having heterogeneous types within the array is conceptually fine, but in practice limits performance. Again, this will be covered in more detail in <a href="hardware.html" class="quarto-xref"><span>Chapter 9</span></a>.</p>
<p>In Julia, arrays can be multi-dimensional. Here are two three-dimensional arrays with length three in each dimension:</p>
<div id="60" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb63"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rand</span>(<span class="fl">3</span>, <span class="fl">3</span>, <span class="fl">3</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>3×3×3 Array{Float64, 3}:
[:, :, 1] =
 0.618993  0.92473   0.833828
 0.778277  0.251514  0.743111
 0.412554  0.17211   0.715182

[:, :, 2] =
 0.966436  0.291518  0.295946
 0.144559  0.495554  0.18235
 0.625558  0.693373  0.617117

[:, :, 3] =
 0.143363  0.205598   0.490111
 0.945836  0.0304228  0.00441218
 0.906006  0.371716   0.76836</code></pre>
</div>
</div>
<div id="62" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb65"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>[x <span class="op">+</span> y <span class="op">+</span> z for x <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, y <span class="kw">in</span> <span class="fl">11</span><span class="op">:</span><span class="fl">13</span>, z <span class="kw">in</span> <span class="fl">21</span><span class="op">:</span><span class="fl">23</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>3×3×3 Array{Int64, 3}:
[:, :, 1] =
 33  34  35
 34  35  36
 35  36  37

[:, :, 2] =
 34  35  36
 35  36  37
 36  37  38

[:, :, 3] =
 35  36  37
 36  37  38
 37  38  39</code></pre>
</div>
</div>
<p>The above example demonstrates <strong>array comprehension</strong> syntax, which is a convenient way to create arrays in Julia.</p>
<p>A two-dimensional array has the rows separated by semi-colons (<code>;</code>):</p>
<div id="64" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb67"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> [<span class="fl">1</span> <span class="fl">2</span> <span class="fl">3</span>; <span class="fl">4</span> <span class="fl">5</span> <span class="fl">6</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>2×3 Matrix{Int64}:
 1  2  3
 4  5  6</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>In Julia, a <code>Vector{Float64}</code> is simply a one-dimensional array of floating points and a <code>Matrix{Float64}</code> is a two-dimensional array. More precisely, they are <strong>type aliases</strong> of the more generic <code>Array{Float64,1}</code> and <code>Array{Float64,2}</code> names. Arrays with three or more dimensions don’t have a type alias pre-defined.</p>
</div>
</div>
</section>
<section id="array-indexing" class="level4" data-number="5.4.3.2">
<h4 data-number="5.4.3.2" class="anchored" data-anchor-id="array-indexing"><span class="header-section-number">5.4.3.2</span> Array indexing</h4>
<p>Array elements are accessed with the integer position, starting at <code>1</code> for the first element<a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a> <a href="#fn9" class="footnote-ref" id="fnref9" role="doc-noteref"><sup>9</sup></a>:</p>
<div id="66" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb69"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>v <span class="op">=</span> [<span class="fl">10</span>, <span class="fl">20</span>, <span class="fl">30</span>, <span class="fl">40</span>, <span class="fl">50</span>]</span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>v[<span class="fl">2</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>20</code></pre>
</div>
</div>
<p>We can also access a subset of the vector’s contents by passing a range:</p>
<div id="68" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb71"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>v[<span class="fl">2</span><span class="op">:</span><span class="fl">4</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>3-element Vector{Int64}:
 20
 30
 40</code></pre>
</div>
</div>
<p>And we can generically reference the array’s contents, such as:</p>
<div id="70" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb73"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>v[begin<span class="op">+</span><span class="fl">1</span><span class="op">:</span><span class="kw">end</span><span class="op">-</span><span class="fl">1</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>3-element Vector{Int64}:
 20
 30
 40</code></pre>
</div>
</div>
<p>We can assign values into the array as well, as well as combine arrays and push new elements to the end:</p>
<div id="72" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb75"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>v[<span class="fl">2</span>] <span class="op">=</span> <span class="op">-</span><span class="fl">1</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a><span class="fu">push!</span>(v, <span class="fl">5</span>)</span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a><span class="fu">vcat</span>(v, [<span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>9-element Vector{Int64}:
 10
 -1
 30
 40
 50
  5
  1
  2
  3</code></pre>
</div>
</div>
</section>
<section id="array-alignment" class="level4" data-number="5.4.3.3">
<h4 data-number="5.4.3.3" class="anchored" data-anchor-id="array-alignment"><span class="header-section-number">5.4.3.3</span> Array Alignment</h4>
<p>When you have an MxN matrix (M rows, N columns), a choice must be made as to which elements are next to each other in memory. Typical math convention and fundamental computer linear algebra libraries (dating back decades!) are column major and Julia follows that legacy. <strong>Column major</strong> means that elements going down the rows of a column are stored next to each other in memory. This is important to know so that (1) you remember that vectors are treated like a column vector when working with arrays (that is: a N element 1D vector is like a Nx1 matrix), and (2) when iterating through an array, it will be faster for the computer to access elements next to each other column-wise. A 10x10 matrix is actually stored in memory as 100 elements coming in order, one after another in single file.</p>
<p>This 3x3 matrix is stored with the elements of columns next to each other, which we can see with <code>vec</code>:</p>
<div id="74" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb77"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>mat <span class="op">=</span> [<span class="fl">1</span> <span class="fl">2</span> <span class="fl">3</span>; <span class="fl">4</span> <span class="fl">5</span> <span class="fl">6</span>; <span class="fl">7</span> <span class="fl">8</span> <span class="fl">9</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>3×3 Matrix{Int64}:
 1  2  3
 4  5  6
 7  8  9</code></pre>
</div>
</div>
<div id="76" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb79"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="fu">vec</span>(mat) <span class="co"># column major order</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>9-element Vector{Int64}:
 1
 4
 7
 2
 5
 8
 3
 6
 9</code></pre>
</div>
</div>
</section>
<section id="sec-programming-ranges" class="level4" data-number="5.4.3.4">
<h4 data-number="5.4.3.4" class="anchored" data-anchor-id="sec-programming-ranges"><span class="header-section-number">5.4.3.4</span> Ranges</h4>
<p>A <strong>range</strong> is a compact representation of a sequence of numbers. We actually used them above to index into arrays. They are expressed as <code>start:stop</code></p>
<p>We don’t have to actually store all of these numbers on the computer somewhere as in an <code>Array</code>. Instead, this is an object that <em>represents</em> the ordered set of numbers. So for example, we can “sum” up a ridiculous amount of numbers almost instantaneously:</p>
<div id="78" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb81"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fl">1</span><span class="op">:</span><span class="fu">big</span>(<span class="fl">100_000_000_000_000_000_000_000_000_000_000_000_000_000</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>5000000000000000000000000000000000000000050000000000000000000000000000000000000000</code></pre>
</div>
</div>
<p>This is possible due to two things:</p>
<ol type="1">
<li>not needing to actually store that many numbers in memory, and</li>
<li>Julia being smart enough to apply the triangular number formula<a href="#fn10" class="footnote-ref" id="fnref10" role="doc-noteref"><sup>10</sup></a> when <code>sum</code> is given a consecutive range.</li>
</ol>
<p>There are more general ways to construct ranges:</p>
<p>Step by another number instead of the default 1:</p>
<div id="80" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb83"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">:</span><span class="fl">7</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>1:2:7</code></pre>
</div>
</div>
<p>Specify the number of values within the range, inclusive of the first number<a href="#fn11" class="footnote-ref" id="fnref11" role="doc-noteref"><sup>11</sup></a>:</p>
<div id="82" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb85"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="co"># range(start, stop, length)</span></span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a><span class="fu">range</span>(<span class="fl">0</span>, <span class="fl">10</span>, <span class="fl">21</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>0.0:0.5:10.0</code></pre>
</div>
</div>
</section>
<section id="characters-strings-and-symbols" class="level4" data-number="5.4.3.5">
<h4 data-number="5.4.3.5" class="anchored" data-anchor-id="characters-strings-and-symbols"><span class="header-section-number">5.4.3.5</span> Characters, Strings, and Symbols</h4>
<p><strong>Characters</strong> are represented in most programming languages as letters within quotation marks. In Julia, individual characters are represented using single quotes:</p>
<div id="84" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb87"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="ch">'a'</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>'a': ASCII/Unicode U+0061 (category Ll: Letter, lowercase)</code></pre>
</div>
</div>
<p>Letters and other characters present more difficulties than numbers to represent within a computer (think of how many languages and alphabets exist!), and it essentially only works because the world at large has agreed to a given representation. Originally <strong>ASCII</strong> (American Standard Code for Information Interchange) was used to represent just 95 of the most common English characters (“a” through “z”, zero through nine, etc.). Now, UTF (Unicode Transformation Format) can encode more than a million characters and symbols from many human languages.</p>
<p><strong>Strings</strong> are a collection<a href="#fn12" class="footnote-ref" id="fnref12" role="doc-noteref"><sup>12</sup></a> of characters, and can be created in Julia with double quotes:</p>
<div id="86" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb89"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="st">"hello world"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>"hello world"</code></pre>
</div>
</div>
<p>It’s easy to ascertain how ‘normal’ characters can be inserted into a string, but what about things like new lines or tabs? They are represented by their own characters but are normally not printed in computer output. However, those otherwise invisible characters do exist. For example, here we will use a <strong>string literal</strong> (indicated by the <code>"""</code> ) to tell Julia to interpret the string as given, including the invisible new line created by hitting return on the keyboard between the two words:</p>
<div id="88" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb91"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="st">"""</span></span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a><span class="st">hello</span></span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a><span class="st">world</span></span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true" tabindex="-1"></a><span class="st">"""</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>"hello\nworld\n"</code></pre>
</div>
</div>
<p>The output above shows the <code>\n</code> character contained within the string.</p>
<p><strong>Symbols</strong> are a way of representing an identifier which cannot be seen as a collection of individual characters. <code>:helloworld</code> is distinct from <code>"helloworld"</code> - you can kind of think of the former as an un-executed bit of code - if we were to execute it (with <code>eval(:helloworld)</code>), we would get an error <code>UndefVarError: `helloworld` not defined</code> . Symbols can <em>look</em> like strings but do not behave like them. For now, it is best to not worry about symbols but it is an important aspect of Julia which allows the language to represent aspects of itself as data. This allows for powerful self-reference and self-modification of code but this is a more advanced topic generally out of scope of this book.</p>
</section>
<section id="tuples" class="level4" data-number="5.4.3.6">
<h4 data-number="5.4.3.6" class="anchored" data-anchor-id="tuples"><span class="header-section-number">5.4.3.6</span> Tuples</h4>
<p>Tuples are a fixed, ordered collection of values, denoted by values inside parentheses and separated by a comma. They are best suited for small collections of related data. An example might be x-y coordinates in 2 dimensional space:</p>
<div id="90" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb93"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> <span class="fl">3</span></span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> <span class="fl">4</span></span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a>p1 <span class="op">=</span> (x, y)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>(3, 4)</code></pre>
</div>
</div>
<p>A tuple’s values can be accessed like arrays:</p>
<div id="92" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb95"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>p1[<span class="fl">1</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>3</code></pre>
</div>
</div>
<p>Tuples fill a middle ground between scalar types and arrays in more ways than one:</p>
<ul>
<li><p>Tuples have no problem having heterogeneous types in the different slots.</p></li>
<li><p>Tuples are <strong>immutable</strong>, meaning that you cannot overwrite the value in memory (an error will be thrown if we try to do <code>p[1] = 5</code>).</p></li>
<li><p>It’s generally expected that within an array, you would be able to apply the same operation to all the elements (e.g.&nbsp;square each element) or do something like sum all of the elements together, which isn’t generally the case for a tuple.</p></li>
<li><p>Tuples are generally stack allocated instead of being heap allocated like arrays<a href="#fn13" class="footnote-ref" id="fnref13" role="doc-noteref"><sup>13</sup></a>, meaning that a lot of times they can be faster than arrays.</p></li>
</ul>
<section id="named-tuples" class="level5" data-number="5.4.3.6.1">
<h5 data-number="5.4.3.6.1" class="anchored" data-anchor-id="named-tuples"><span class="header-section-number">5.4.3.6.1</span> Named Tuples</h5>
<p>Named tuples provide a way to give each field within the tuple a specific name. For example, our x-y coordinate example above could become:</p>
<div id="94" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb97"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>p2 <span class="op">=</span> (x<span class="op">=</span><span class="fl">3</span>, y<span class="op">=</span><span class="fl">4</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>(x = 3, y = 4)</code></pre>
</div>
</div>
<p>The benefit is that we can give more meaning to each field and access the values in a nicer way. Previously, we used <code>location[1]</code> to access the x-value, but with the new definition we can access it by name:</p>
<div id="96" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb99"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>p2.x</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>3</code></pre>
</div>
</div>
</section>
</section>
<section id="dictionaries" class="level4" data-number="5.4.3.7">
<h4 data-number="5.4.3.7" class="anchored" data-anchor-id="dictionaries"><span class="header-section-number">5.4.3.7</span> Dictionaries</h4>
<p><strong>Dictionaries</strong> are a container which relates a <strong>key</strong> to an associated <strong>value</strong>. Kind of like how arrays relate an index to a value, but the difference is that a dictionary is (1) un-ordered and (2) the key doesn’t have to be an integer.</p>
<p>Here’s an example which relates a name to an age:</p>
<div id="98" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb101"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a>d <span class="op">=</span> <span class="fu">Dict</span>(</span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Joelle"</span> <span class="op">=&gt;</span> <span class="fl">10</span>,</span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Monica"</span> <span class="op">=&gt;</span> <span class="fl">84</span>,</span>
<span id="cb101-4"><a href="#cb101-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Zaylee"</span> <span class="op">=&gt;</span> <span class="fl">39</span>,</span>
<span id="cb101-5"><a href="#cb101-5" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>Dict{String, Int64} with 3 entries:
  "Monica" =&gt; 84
  "Zaylee" =&gt; 39
  "Joelle" =&gt; 10</code></pre>
</div>
</div>
<p>Then we can look up an age given a name:</p>
<div id="100" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb103"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a>d[<span class="st">"Zaylee"</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>39</code></pre>
</div>
</div>
<p>Dictionaries are super flexible data structures and can be used in many situations.</p>
</section>
</section>
<section id="sec-parametric-types" class="level3" data-number="5.4.4">
<h3 data-number="5.4.4" class="anchored" data-anchor-id="sec-parametric-types"><span class="header-section-number">5.4.4</span> Parametric Types</h3>
<p>We just saw how tuples can contain heterogeneous types of data inside a common container. <strong>Parametric Types</strong> are a way of allowing types themselves to be variable, with a wrapper type containing a to-be-specified inner-type.</p>
<p>Let’s look at this a little bit closer by looking at the full type:</p>
<div id="102" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb105"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(p1)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>Tuple{Int64, Int64}</code></pre>
</div>
</div>
<p><code>p1</code> is a <code>Tuple{Int64,Int64}</code> type, which means that its first and second elements are both <code>Int64</code>. Contrast this with:</p>
<div id="104" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb107"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>((<span class="st">"hello"</span>, <span class="fl">1.0</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>Tuple{String, Float64}</code></pre>
</div>
</div>
<p>These tuples are both of the form <code>Tuple{T,U}</code> where <code>T</code> and <code>U</code> are both types. Why does this matter? We and the compiler can distinguish between a <code>Tuple{Int64,Int64}</code> and a <code>Tuple{String,Float64}</code> which allows us to reason about things (“I can add the first element of tuple together only if both are numbers”) and the compiler to optimize (sometimes it can know exactly how many bits in memory a tuple of a certain kind will need and be more efficient about memory use). Further, we will see how this can become a powerful force in writing appropriately abstracted code and more logically organize our entire program when we encounter “multiple dispatch” later on.</p>
<p>This is a very powerful technique - we’ve already seen the flexibility of having an <code>Array</code> type which can contain arbitrary inner types and dimensions. The full type signature for an <code>Array</code> looks like <code>Array{InnerType,NumDimensions}</code>.</p>
<div id="106" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb109"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span></span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> [<span class="fl">1</span> <span class="fl">2</span></span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a>        <span class="fl">3</span> <span class="fl">4</span>]</span>
<span id="cb109-4"><a href="#cb109-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">typeof</span>(x)</span>
<span id="cb109-5"><a href="#cb109-5" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<div class="ansi-escaped-output">
<pre>Matrix{Int64}<span class="ansi-bright-black-fg"> (alias for </span><span class="ansi-bright-black-fg">Array{Int64, 2}</span><span class="ansi-bright-black-fg">)</span></pre>
</div>
</div>
</div>
</section>
<section id="types-for-things-not-there" class="level3" data-number="5.4.5">
<h3 data-number="5.4.5" class="anchored" data-anchor-id="types-for-things-not-there"><span class="header-section-number">5.4.5</span> Types for things not there</h3>
<p><code>nothing</code> represents that there’s nothing to be returned - for example if there’s no solution to an optimization problem or if a function just doesn’t have any value to <code>return</code> (such as in the case with input/output like <code>println</code>).</p>
<p><code>missing</code> is to represent a value that <em>should</em> be there but is not, as is all too common in real-world data. Julia natively supports <code>missing</code> and three-value logic, which is an extension of the two-value boolean (true/false) logic, to handle missing logical values:</p>
<div id="tbl-first" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-first-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;5.1: NOT logic
</figcaption>
<div aria-describedby="tbl-first-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<thead>
<tr class="header">
<th>NOT (<code>!</code>)</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong><code>true</code></strong></td>
<td><code>false</code></td>
</tr>
<tr class="even">
<td><strong><code>missing</code></strong></td>
<td><code>missing</code></td>
</tr>
<tr class="odd">
<td><strong><code>false</code></strong></td>
<td><code>true</code></td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<div id="tbl-second" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-second-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;5.2: AND logic
</figcaption>
<div aria-describedby="tbl-second-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<thead>
<tr class="header">
<th>AND (<code>&amp;</code>)</th>
<th><code>true</code></th>
<th><code>missing</code></th>
<th><code>false</code></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong><code>true</code></strong></td>
<td><code>true</code></td>
<td><code>missing</code></td>
<td><code>false</code></td>
</tr>
<tr class="even">
<td><strong><code>missing</code></strong></td>
<td><code>missing</code></td>
<td><code>missing</code></td>
<td><code>false</code></td>
</tr>
<tr class="odd">
<td><strong><code>false</code></strong></td>
<td><code>false</code></td>
<td><code>false</code></td>
<td><code>false</code></td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<div id="tbl-third" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-third-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;5.3: OR Logic
</figcaption>
<div aria-describedby="tbl-third-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<thead>
<tr class="header">
<th>OR (<code>|</code>)</th>
<th><code>true</code></th>
<th><code>missing</code></th>
<th><code>false</code></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong><code>true</code></strong></td>
<td><code>true</code></td>
<td><code>true</code></td>
<td><code>true</code></td>
</tr>
<tr class="even">
<td><strong><code>missing</code></strong></td>
<td><code>true</code></td>
<td><code>missing</code></td>
<td><code>missing</code></td>
</tr>
<tr class="odd">
<td><strong><code>false</code></strong></td>
<td><code>true</code></td>
<td><code>missing</code></td>
<td><code>false</code></td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p>Three value logic with <code>true</code>, <code>missing</code>, and <code>false</code>.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p><code>Missing</code> and <code>Nothing</code> are the <em>types</em> while <code>missing</code> and <code>nothing</code> are the values here<a href="#fn14" class="footnote-ref" id="fnref14" role="doc-noteref"><sup>14</sup></a>. This is analogous to <code>Float64</code> being a type and <code>2.0</code> being a value.</p>
</div>
</div>
</section>
<section id="union-types" class="level3" data-number="5.4.6">
<h3 data-number="5.4.6" class="anchored" data-anchor-id="union-types"><span class="header-section-number">5.4.6</span> Union Types</h3>
<p>When two types may arise in a context, <strong>union types</strong> are a way to represent that. For example, if we have a data feed and we know that it will produce <em>either</em> a <code>Float64</code> <em>or</em> a <code>Missing</code> type then we can say that the value for this is <code>Union{Float64,Missing}</code>. This is much better for the compiler (and our performance!) than saying that the type of this is <code>Any</code>.</p>
</section>
<section id="sec-user-defined-types" class="level3" data-number="5.4.7">
<h3 data-number="5.4.7" class="anchored" data-anchor-id="sec-user-defined-types"><span class="header-section-number">5.4.7</span> Creating User Defined Types</h3>
<p>We’ve talked about some built-in types but so much additional capabilities come from being able to define our own types. For example, taking the x-y-coordinate example from above, we could do the following instead of defining a tuple:</p>
<div id="108" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb110"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> BasicPoint</span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a>    x<span class="op">::</span><span class="dt">Int64</span></span>
<span id="cb110-3"><a href="#cb110-3" aria-hidden="true" tabindex="-1"></a>    y<span class="op">::</span><span class="dt">Int64</span></span>
<span id="cb110-4"><a href="#cb110-4" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb110-5"><a href="#cb110-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-6"><a href="#cb110-6" aria-hidden="true" tabindex="-1"></a>p3 <span class="op">=</span> <span class="fu">BasicPoint</span>(<span class="fl">3</span>, <span class="fl">4</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>BasicPoint(3, 4)</code></pre>
</div>
</div>
<p><code>BasicPoint</code> is a <strong>composite type</strong> because it is composed of elements of other types. Fields are accessed the same way as named tuples:</p>
<div id="110" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="annotated-cell-58"><pre class="sourceCode julia code-annotation-code code-with-copy code-annotated"><code class="sourceCode julia"><a class="code-annotation-anchor" data-target-cell="annotated-cell-58" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-58-1" class="code-annotation-target"><a href="#annotated-cell-58-1" aria-hidden="true" tabindex="-1"></a>p3.x, p3.y</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-58" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-58" data-code-lines="1" data-code-annotation="1">Note that here, Julia will return a tuple instead of a single value due to the comma separated expressions.</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>(3, 4)</code></pre>
</div>
</div>
<p><code>structs</code> in Julia are immutable like tuples above.</p>
<p>But wait, didn’t tuples let us mix types too via parametric types? Yes, and we can do the same with our type!</p>
<div id="112" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="annotated-cell-59"><pre class="sourceCode julia code-annotation-code code-with-copy code-annotated"><code class="sourceCode julia"><a class="code-annotation-anchor" data-target-cell="annotated-cell-59" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-59-1" class="code-annotation-target"><a href="#annotated-cell-59-1" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Point{T}</span>
<span id="annotated-cell-59-2"><a href="#annotated-cell-59-2" aria-hidden="true" tabindex="-1"></a>    x<span class="op">::</span><span class="dt">T</span></span>
<span id="annotated-cell-59-3"><a href="#annotated-cell-59-3" aria-hidden="true" tabindex="-1"></a>    y<span class="op">::</span><span class="dt">T</span></span>
<span id="annotated-cell-59-4"><a href="#annotated-cell-59-4" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-59" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-59" data-code-lines="1" data-code-annotation="1">The <code>{T}</code> after the type’s name allows for different <code>Point</code>s to be created depending on what the type of the underlying <code>x</code> and <code>y</code> is.</span>
</dd>
</dl>
</div>
</div>
<p>Here’s two new points which now have different types:</p>
<div id="114" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb113"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a>p4 <span class="op">=</span> <span class="fu">Point</span>(<span class="fl">1</span>, <span class="fl">4</span>)</span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a>p5 <span class="op">=</span> <span class="fu">Point</span>(<span class="fl">2.0</span>, <span class="fl">3.0</span>)</span>
<span id="cb113-3"><a href="#cb113-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-4"><a href="#cb113-4" aria-hidden="true" tabindex="-1"></a>p4, p5</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>(Point{Int64}(1, 4), Point{Float64}(2.0, 3.0))</code></pre>
</div>
</div>
<p>Note that the types are not equal because they have different type parameters!</p>
<div id="116" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb115"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(p4), <span class="fu">typeof</span>(p5), <span class="fu">typeof</span>(p4) <span class="op">==</span> <span class="fu">typeof</span>(p5)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>(Point{Int64}, Point{Float64}, false)</code></pre>
</div>
</div>
<p>Both <code>p4</code> and <code>p5</code> are instances of different concrete types Point{Int} and Point{Float64}. The expression <code>X isa Y</code> is <code>true</code> when <code>X</code> is a (sub)type of <code>Y</code>:</p>
<div id="118" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb117"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a>p4 isa Point, p5 isa Point</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>(true, true)</code></pre>
</div>
</div>
<p>Note though, that <code>x</code> and <code>y</code> are both of the same type in each <code>Point</code> that we created. If instead we wanted to allow the coordinates to be of different types, then we could have defined <code>Point</code> as follows:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb119"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Point{T,U}</span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a>    x<span class="op">::</span><span class="dt">T</span></span>
<span id="cb119-3"><a href="#cb119-3" aria-hidden="true" tabindex="-1"></a>    y<span class="op">::</span><span class="dt">U</span></span>
<span id="cb119-4"><a href="#cb119-4" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Can we define the <code>struct</code>s above without indicating a (parametric) type? Yes!</p>
<div id="120" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb120"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> PointUntyped</span>
<span id="cb120-2"><a href="#cb120-2" aria-hidden="true" tabindex="-1"></a>    x <span class="co"># no type here!</span></span>
<span id="cb120-3"><a href="#cb120-3" aria-hidden="true" tabindex="-1"></a>    y <span class="co"># no type declared here either!</span></span>
<span id="cb120-4"><a href="#cb120-4" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>But! <code>x</code> and <code>y</code> will both be allowed to be <code>Any</code>, which is the fallback type where Julia says that it doesn’t know any more about the type until runtime (the time at which our program encounters the data when running). Observe that the type of <code>x</code> and <code>y</code> here is <code>Any</code>:</p>
<div id="122" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb121"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fieldtypes</span>(PointUntyped)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>(Any, Any)</code></pre>
</div>
</div>
<p>This means that the compiler (and us!) can’t reason about or optimize the code as effectively as when the types are explicit or parametric. This is an example of how Julia can provide a nice learning curve - don’t worry about the types until you start to get more sophisticated about the program design or need to extract more performance from the code.</p>
</div>
</div>
<p>The above <code>struct</code>s that we have defined are examples of <strong>concrete types</strong> which hold data. <strong>Abstract types</strong> don’t directly hold data themselves but are used to define a hierarchy of types which we will later exploit (<a href="patterns-abstraction.html" class="quarto-xref"><span>Chapter 8</span></a>) to implement custom behavior depending on what type our data is.</p>
<p>Here’s an example of (1) defining a set of related types that sits above our <code>Point2D</code>:</p>
<div id="124" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb123"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="kw">abstract type</span> Coordinate <span class="kw">end</span></span>
<span id="cb123-2"><a href="#cb123-2" aria-hidden="true" tabindex="-1"></a><span class="kw">abstract type</span> CartesianCoordinate <span class="op">&lt;:</span><span class="dt"> Coordinate </span><span class="kw">end</span></span>
<span id="cb123-3"><a href="#cb123-3" aria-hidden="true" tabindex="-1"></a><span class="kw">abstract type</span> PolarCoordinate <span class="op">&lt;:</span><span class="dt"> Coordinate </span><span class="kw">end</span></span>
<span id="cb123-4"><a href="#cb123-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-5"><a href="#cb123-5" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Point2D{T} <span class="op">&lt;:</span><span class="dt"> CartesianCoordinate</span></span>
<span id="cb123-6"><a href="#cb123-6" aria-hidden="true" tabindex="-1"></a>    x<span class="op">::</span><span class="dt">T</span></span>
<span id="cb123-7"><a href="#cb123-7" aria-hidden="true" tabindex="-1"></a>    y<span class="op">::</span><span class="dt">T</span></span>
<span id="cb123-8"><a href="#cb123-8" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb123-9"><a href="#cb123-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-10"><a href="#cb123-10" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Point3D{T} <span class="op">&lt;:</span><span class="dt"> CartesianCoordinate</span></span>
<span id="cb123-11"><a href="#cb123-11" aria-hidden="true" tabindex="-1"></a>    x<span class="op">::</span><span class="dt">T</span></span>
<span id="cb123-12"><a href="#cb123-12" aria-hidden="true" tabindex="-1"></a>    y<span class="op">::</span><span class="dt">T</span></span>
<span id="cb123-13"><a href="#cb123-13" aria-hidden="true" tabindex="-1"></a>    z<span class="op">::</span><span class="dt">T</span></span>
<span id="cb123-14"><a href="#cb123-14" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb123-15"><a href="#cb123-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-16"><a href="#cb123-16" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Polar2D{T} <span class="op">&lt;:</span><span class="dt"> PolarCoordinate</span></span>
<span id="cb123-17"><a href="#cb123-17" aria-hidden="true" tabindex="-1"></a>    r<span class="op">::</span><span class="dt">T</span></span>
<span id="cb123-18"><a href="#cb123-18" aria-hidden="true" tabindex="-1"></a>    θ<span class="op">::</span><span class="dt">T</span></span>
<span id="cb123-19"><a href="#cb123-19" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Unicode Characters
</div>
</div>
<div class="callout-body-container callout-body">
<p>Julia has wonderful Unicode support, meaning that it’s not a problem to include characters like <code>θ</code>. The character can be typed in Julia editors by entering <code>\theta</code> and then pressing the TAB key on the keyboard.</p>
<p>Unicode is helpful for following conventions that you may be used to in math. For example, the math formula <span class="math inline">\(\text{circumference}(r) = 2 \times r \times \pi\)</span> can be written in Julia with <code>circumference(r) = 2 * r * π</code>.</p>
<p>The name for the characters follows the same for LaTeX, so you can search the internet to find the appropriate name: for example search “theta LaTeX”. Further, you can use the REPL help mode to find out how to enter a character if you can copy and paste it from somewhere:</p>
<pre class="julia-repl"><code>help?&gt; θ
"θ" can be typed by \theta&lt;tab&gt;</code></pre>
</div>
</div>
<p>To constrain the types that could be used within our coordinates above, such as if we wanted the fields to all be Real-valued, we could modify the <code>struct</code> definitions with the <code>&lt;:Real</code> annotation:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb125"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Point2D{T<span class="op">&lt;:</span><span class="dt">Real</span>} <span class="op">&lt;:</span><span class="dt"> CartesianCoordinate</span></span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ...</span></span>
<span id="cb125-3"><a href="#cb125-3" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb125-4"><a href="#cb125-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-5"><a href="#cb125-5" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Point3D{T<span class="op">&lt;:</span><span class="dt">Real</span>} <span class="op">&lt;:</span><span class="dt"> CartesianCoordinate</span></span>
<span id="cb125-6"><a href="#cb125-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ...</span></span>
<span id="cb125-7"><a href="#cb125-7" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb125-8"><a href="#cb125-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-9"><a href="#cb125-9" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Polar2D{T<span class="op">&lt;:</span><span class="dt">Real</span>} <span class="op">&lt;:</span><span class="dt"> PolarCoordinate</span></span>
<span id="cb125-10"><a href="#cb125-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ...</span></span>
<span id="cb125-11"><a href="#cb125-11" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="mutable-structs" class="level3" data-number="5.4.8">
<h3 data-number="5.4.8" class="anchored" data-anchor-id="mutable-structs"><span class="header-section-number">5.4.8</span> Mutable structs</h3>
<p>It is possible to define <code>struct</code>s where the data can be modified - such a data field is said to be <strong>mutable</strong> because it can be changed or mutated. Here’s an example of what it would look like if we made <code>Point2D</code> mutable:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb126"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="kw">mutable struct</span> Point2D{T}</span>
<span id="cb126-2"><a href="#cb126-2" aria-hidden="true" tabindex="-1"></a>    x<span class="op">::</span><span class="dt">T</span></span>
<span id="cb126-3"><a href="#cb126-3" aria-hidden="true" tabindex="-1"></a>    y<span class="op">::</span><span class="dt">T</span></span>
<span id="cb126-4"><a href="#cb126-4" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>You may find that this more naturally represents what you are trying to do. However, recall that an advantage of an immutable datatype is that costly memory doesn’t necessarily have to be allocated for it. So you may think that you’re being more efficient by re-using the same object… but it may not actually be faster. Again, more will be revealed in <a href="hardware.html" class="quarto-xref"><span>Chapter 9</span></a>.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Financial Modeling Pro Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>For financial models, it is best practice to default to immutable ⁠structs. Immutability prevents accidental modification of data, making your model’s state easier to reason about and debug. This is especially critical in complex models with many interacting components. Use ⁠mutable struct only when you have a specific reason to modify data in-place.</p>
</div>
</div>
</section>
<section id="sec-constructors" class="level3" data-number="5.4.9">
<h3 data-number="5.4.9" class="anchored" data-anchor-id="sec-constructors"><span class="header-section-number">5.4.9</span> Constructors</h3>
<p><strong>Constructors</strong> are functions that return a data type (functions will be covered more generally later in the chapter). When we declare a <code>struct</code>, an implicit function is defined that takes a tuple of arguments and returns the data type that was declared. In the following example, after we define <code>MyType</code> the <code>struct</code>, Julia creates a function (also called <code>MyType</code>) which takes two arguments and will return the datatype <code>MyType</code>:</p>
<div id="126" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb127"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> MyDate</span>
<span id="cb127-2"><a href="#cb127-2" aria-hidden="true" tabindex="-1"></a>    year<span class="op">::</span><span class="dt">Int</span></span>
<span id="cb127-3"><a href="#cb127-3" aria-hidden="true" tabindex="-1"></a>    month<span class="op">::</span><span class="dt">Int</span></span>
<span id="cb127-4"><a href="#cb127-4" aria-hidden="true" tabindex="-1"></a>    day<span class="op">::</span><span class="dt">Int</span></span>
<span id="cb127-5"><a href="#cb127-5" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb127-6"><a href="#cb127-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb127-7"><a href="#cb127-7" aria-hidden="true" tabindex="-1"></a><span class="fu">methods</span>(MyDate)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
# 2 methods for type constructor:<ul><li> Main.Notebook.MyDate(year::<b>Int64</b>, month::<b>Int64</b>, day::<b>Int64</b>) in Main.Notebook at <a href="https://github.com/alecloudenback/julia-fin-book/tree/9339403f246a6fafd9640d366449926aa99f8b95//foundations-of-programming.qmd#L974" target="_blank">/Users/alecloudenback/prog/julia-fin-book/foundations-of-programming.qmd:974</a></li> <li> Main.Notebook.MyDate(year, month, day) in Main.Notebook at <a href="https://github.com/alecloudenback/julia-fin-book/tree/9339403f246a6fafd9640d366449926aa99f8b95//foundations-of-programming.qmd#L974" target="_blank">/Users/alecloudenback/prog/julia-fin-book/foundations-of-programming.qmd:974</a></li> </ul>
</div>
</div>
<p>Implicit constructors are nice in that you don’t have to define a default method and the language does it for you. Sometimes there’s reasons to want to control how an object is created, either for convenience or to enforce certain restrictions.</p>
<p>We can use an inner constructor (i.e.&nbsp;inside the <code>struct</code> block) to enforce restrictions:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb128"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> MyDate</span>
<span id="cb128-2"><a href="#cb128-2" aria-hidden="true" tabindex="-1"></a>    year<span class="op">::</span><span class="dt">Int</span></span>
<span id="cb128-3"><a href="#cb128-3" aria-hidden="true" tabindex="-1"></a>    month<span class="op">::</span><span class="dt">Int</span></span>
<span id="cb128-4"><a href="#cb128-4" aria-hidden="true" tabindex="-1"></a>    day<span class="op">::</span><span class="dt">Int</span></span>
<span id="cb128-5"><a href="#cb128-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-6"><a href="#cb128-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">function</span> <span class="fu">MyDate</span>(y,m,d)</span>
<span id="cb128-7"><a href="#cb128-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> !(m <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">12</span>)</span>
<span id="cb128-8"><a href="#cb128-8" aria-hidden="true" tabindex="-1"></a>            <span class="fu">error</span>(<span class="st">"month is not between 1 and 12"</span>)</span>
<span id="cb128-9"><a href="#cb128-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elseif</span> !(d <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">31</span>)</span>
<span id="cb128-10"><a href="#cb128-10" aria-hidden="true" tabindex="-1"></a>            <span class="fu">error</span>(<span class="st">"day is not between 1 and 31"</span>)</span>
<span id="cb128-11"><a href="#cb128-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span></span>
<span id="cb128-12"><a href="#cb128-12" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="fu">new</span>(y,m,d)</span>
<span id="cb128-13"><a href="#cb128-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">end</span></span>
<span id="cb128-14"><a href="#cb128-14" aria-hidden="true" tabindex="-1"></a>    <span class="kw">end</span></span>
<span id="cb128-15"><a href="#cb128-15" aria-hidden="true" tabindex="-1"></a>                </span>
<span id="cb128-16"><a href="#cb128-16" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>And outer constructors are simply functions defined that have the same name as the data type, but are not defined inside the <code>struct</code> block. Extending the <code>MyDate</code> example, say we want to provide a default constructor for if no day is given such that the date returns the 1st of the month:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb129"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">MyDate</span>(y,m)</span>
<span id="cb129-2"><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">MyDate</span>(y,m,<span class="fl">1</span>)</span>
<span id="cb129-3"><a href="#cb129-3" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="functions" class="level2" data-number="5.5">
<h2 data-number="5.5" class="anchored" data-anchor-id="functions"><span class="header-section-number">5.5</span> Functions</h2>
<p>Functions are a set of expressions that take inputs and return specified outputs.</p>
<section id="special-operators" class="level3" data-number="5.5.1">
<h3 data-number="5.5.1" class="anchored" data-anchor-id="special-operators"><span class="header-section-number">5.5.1</span> Special Operators</h3>
<p>Operators are the glue of expressions which combine values. We’ve already seen quite a few, but let’s develop a little bit of terminology for these functions.</p>
<p><strong>Unary operators</strong> are operators which only take a single argument. Examples include the <code>!</code> which negates a boolean value or <code>-</code> which negates a number:</p>
<div id="128" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb130"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a>!<span class="cn">true</span>, <span class="op">-</span><span class="fl">5</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>(false, -5)</code></pre>
</div>
</div>
<p><strong>Binary operators</strong> take two arguments and are some of the most common functions we encounter, such as <code>+</code> or <code>-</code> or <code>&gt;</code>:</p>
<div id="130" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb132"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="fl">1</span> <span class="op">+</span> <span class="fl">2</span>, <span class="fl">1</span> <span class="op">-</span> <span class="fl">2</span>, <span class="fl">1</span> <span class="op">&gt;</span> <span class="fl">2</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>(3, -1, false)</code></pre>
</div>
</div>
<p>The above unary and binary operators are special kinds of functions which don’t require the use of parenthesis. However, they can be written with parentheses for greater clarity:</p>
<div id="132" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb134"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a>!(<span class="cn">true</span>), <span class="fu">-</span>(<span class="fl">5</span>), <span class="fu">+</span>(<span class="fl">1</span>, <span class="fl">2</span>), <span class="fu">-</span>(<span class="fl">1</span>, <span class="fl">2</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>(false, -5, 3, -1)</code></pre>
</div>
</div>
<p>In Julia, we distinguish between <strong>functions</strong> which define behavior that maps a set of inputs to outputs. But a single function can adapt its behavior to the arguments themselves. We have just seen the function <code>-</code> be used in two different ways: negation and subtraction depending on whether it had one or two arguments given to it. In this way there is a conceptual hierarchy of functions that complements the hierarchy we have discussed in relation to types:</p>
<ul>
<li><code>-</code> is the overall function</li>
<li><code>-(x)</code> is a unary function which negates its values, <code>-(x,y)</code> subtracts <code>y</code> from <code>x</code></li>
<li>Specific methods are then created for each combination of concrete types: <code>-(x::Float64)</code> is a different method than <code>-(x::Int)</code></li>
</ul>
<p><strong>Methods</strong> are specific compiled versions of the function for specific types. This is important because at a hardware level, operations for different types (e.g.&nbsp;integers versus floating point) differ considerably. By optimizing for the specific types Julia is able to achieve nearly ideal performance without the same sacrifices of other dynamic languages. We will develop more with respect to methods when we talk about dispatch in <a href="patterns-abstraction.html" class="quarto-xref"><span>Chapter 8</span></a>.</p>
<p>For example, <code>factorial</code> would be referred to as the <em>function</em>, while specific implementations are called <em>methods</em>. We can see all of the methods for any function with the <code>methods</code> function, like the following for <code>factorial</code> which has implementations taking into account the specialized needs for different types of arguments:</p>
<div id="134" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb136"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="fu">methods</span>(factorial)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
# 7 methods for generic function <b>factorial</b> from [90mBase[39m:<ul><li> factorial(n::<b>UInt128</b>) in Base at <a href="https://github.com/JuliaLang/julia/tree/5fe89b8ddc166260bfcd4a195b305aff0ccad686/base/combinatorics.jl#L33" target="_blank">combinatorics.jl:33</a></li> <li> factorial(n::<b>Int128</b>) in Base at <a href="https://github.com/JuliaLang/julia/tree/5fe89b8ddc166260bfcd4a195b305aff0ccad686/base/combinatorics.jl#L32" target="_blank">combinatorics.jl:32</a></li> <li> factorial(x::<b>BigFloat</b>) in Base.MPFR at <a href="https://github.com/JuliaLang/julia/tree/5fe89b8ddc166260bfcd4a195b305aff0ccad686/base/mpfr.jl#L855" target="_blank">mpfr.jl:855</a></li> <li> factorial(n::<b>BigInt</b>) in Base.GMP at <a href="https://github.com/JuliaLang/julia/tree/5fe89b8ddc166260bfcd4a195b305aff0ccad686/base/gmp.jl#L704" target="_blank">gmp.jl:704</a></li> <li> factorial(n::<b>Union{Int16, Int32, Int8, UInt16, UInt32, UInt8}</b>) in Base at <a href="https://github.com/JuliaLang/julia/tree/5fe89b8ddc166260bfcd4a195b305aff0ccad686/base/combinatorics.jl#L40" target="_blank">combinatorics.jl:40</a></li> <li> factorial(n::<b>Union{Int64, UInt64}</b>) in Base at <a href="https://github.com/JuliaLang/julia/tree/5fe89b8ddc166260bfcd4a195b305aff0ccad686/base/combinatorics.jl#L34" target="_blank">combinatorics.jl:34</a></li> <li> factorial(n::<b>Integer</b>) in Base at <a href="https://github.com/JuliaLang/julia/tree/5fe89b8ddc166260bfcd4a195b305aff0ccad686/base/intfuncs.jl#L1207" target="_blank">intfuncs.jl:1207</a></li> </ul>
</div>
</div>
</section>
<section id="sec-functions" class="level3" data-number="5.5.2">
<h3 data-number="5.5.2" class="anchored" data-anchor-id="sec-functions"><span class="header-section-number">5.5.2</span> Defining Functions</h3>
<p>Functions more generally are defined like so:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb137"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">functionname</span>(arguments)</span>
<span id="cb137-2"><a href="#cb137-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ... code that does things</span></span>
<span id="cb137-3"><a href="#cb137-3" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Here’s an example which returns the difference between the highest and lowest values in a collection:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="annotated-cell-75"><pre class="sourceCode julia code-annotation-code code-with-copy code-annotated"><code class="sourceCode julia"><span id="annotated-cell-75-1"><a href="#annotated-cell-75-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">value_range</span>(collection)</span>
<span id="annotated-cell-75-2"><a href="#annotated-cell-75-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-75-3"><a href="#annotated-cell-75-3" aria-hidden="true" tabindex="-1"></a>    hi <span class="op">=</span> <span class="fu">maximum</span>(collection)</span>
<span id="annotated-cell-75-4"><a href="#annotated-cell-75-4" aria-hidden="true" tabindex="-1"></a>    lo <span class="op">=</span> <span class="fu">minimum</span>(collection)</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-75" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-75-5" class="code-annotation-target"><a href="#annotated-cell-75-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> hi <span class="op">-</span> lo</span>
<span id="annotated-cell-75-6"><a href="#annotated-cell-75-6" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-75" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-75" data-code-lines="5" data-code-annotation="1"><code>return</code> is optional but recommended to convey to readers of the program where you expect your function to terminate and return a value.</span>
</dd>
</dl>
</section>
<section id="sec-methods" class="level3" data-number="5.5.3">
<h3 data-number="5.5.3" class="anchored" data-anchor-id="sec-methods"><span class="header-section-number">5.5.3</span> Defining Methods on Types</h3>
<p>Here’s another example of a function which calculates the distance between a point and the origin:</p>
<div id="136" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="annotated-cell-76"><pre class="sourceCode julia code-annotation-code code-with-copy code-annotated"><code class="sourceCode julia"><a class="code-annotation-anchor" data-target-cell="annotated-cell-76" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-76-1" class="code-annotation-target"><a href="#annotated-cell-76-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">distance</span>(point)</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-76" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-76-2" class="code-annotation-target"><a href="#annotated-cell-76-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">sqrt</span>(point.x<span class="op">^</span><span class="fl">2</span> <span class="op">+</span> point.y<span class="op">^</span><span class="fl">2</span>)</span>
<span id="annotated-cell-76-3"><a href="#annotated-cell-76-3" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-76" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-76" data-code-lines="1" data-code-annotation="1">A <code>function</code> block is declared with the name <code>distance</code> which takes a single argument called <code>point</code></span>
</dd>
<dt data-target-cell="annotated-cell-76" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-76" data-code-lines="2" data-code-annotation="2">We compute the distance formula for a point with x and y coordinates. The <code>return</code> value makes explicit what value the function will output.</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>distance (generic function with 1 method)</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>An alternate, simpler function syntax for <code>distance</code> would be:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb139"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="fu">distance</span>(point) <span class="op">=</span> <span class="fu">sqrt</span>(point.x<span class="op">^</span><span class="fl">2</span> <span class="op">+</span> point.y<span class="op">^</span><span class="fl">2</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
<p>However, we might at this point note a flaw in our function’s definition if we think about the various <code>Coordinate</code>s we defined earlier: our definition would currently only work for <code>Point2D</code>. For example, if we try a <code>Point3D</code> we will get the wrong answer:</p>
<div id="138" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb140"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a><span class="fu">distance</span>(<span class="fu">Point3D</span>(<span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>,))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>1.4142135623730951</code></pre>
</div>
</div>
<p>The above value should be <span class="math inline">\(\sqrt{3}\)</span>, or approximately <span class="math inline">\(1.73205\)</span>.</p>
<p>What we need to do is define a refined distance for each type, which we’ll call <code>dist</code> to distinguish from the earlier definition.</p>
<div id="140" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb142"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true" tabindex="-1"></a><span class="st">"""</span></span>
<span id="cb142-2"><a href="#cb142-2" aria-hidden="true" tabindex="-1"></a><span class="st">    dist(point)</span></span>
<span id="cb142-3"><a href="#cb142-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-4"><a href="#cb142-4" aria-hidden="true" tabindex="-1"></a><span class="st">The euclidean distance of a point from the origin.</span></span>
<span id="cb142-5"><a href="#cb142-5" aria-hidden="true" tabindex="-1"></a><span class="st">"""</span></span>
<span id="cb142-6"><a href="#cb142-6" aria-hidden="true" tabindex="-1"></a><span class="fu">dist</span>(p<span class="op">::</span><span class="dt">Point2D</span>) <span class="op">=</span> <span class="fu">sqrt</span>(p.x<span class="op">^</span><span class="fl">2</span> <span class="op">+</span> p.y<span class="op">^</span><span class="fl">2</span>)</span>
<span id="cb142-7"><a href="#cb142-7" aria-hidden="true" tabindex="-1"></a><span class="fu">dist</span>(p<span class="op">::</span><span class="dt">Point3D</span>) <span class="op">=</span> <span class="fu">sqrt</span>(p.x<span class="op">^</span><span class="fl">2</span> <span class="op">+</span> p.y<span class="op">^</span><span class="fl">2</span> <span class="op">+</span> p.z<span class="op">^</span><span class="fl">2</span>)</span>
<span id="cb142-8"><a href="#cb142-8" aria-hidden="true" tabindex="-1"></a><span class="fu">dist</span>(p<span class="op">::</span><span class="dt">Polar2D</span>) <span class="op">=</span> p.r</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>dist (generic function with 3 methods)</code></pre>
</div>
</div>
<p>Now our result will be correct:</p>
<div id="142" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb144"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb144-1"><a href="#cb144-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dist</span>(<span class="fu">Point3D</span>(<span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>,))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>1.7320508075688772</code></pre>
</div>
</div>
<p>This is referred to as <strong>dispatching</strong> on the argument types. Julia will look up to find the most specific method of a function for the given argument types, and falling back to a generic implementation if one is defined.</p>
<p>In <a href="patterns-abstraction.html" class="quarto-xref"><span>Chapter 8</span></a> we will see how dispatch (single and multiple) can provide very nice abstractions to simplify the design of a model.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Docstrings (Documentation Strings)
</div>
</div>
<div class="callout-body-container callout-body">
<p>Notice the strings preceding the definition of <code>dist</code>. In Julia, putting a string (<code>"..."</code>) or string literal (<code>"""..."""</code>) right above the definition will allow Julia to recognize the string as documentation and provided it to the user in help mode (<a href="julia-writing.html#sec-help-mode" class="quarto-xref"><span>Section 21.4.1</span></a>) and/or have a documentation tool create a webpage or PDF documentation resource.</p>
</div>
</div>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Caution</span>Defining Methods for Parametric Types
</div>
</div>
<div class="callout-body-container callout-body">
<p>We learned that <code>Float64 &lt;: Real</code> in the type hierarchy. However, note that <code>Tuple{Float64}</code> is not a sub-type of <code>Tuple{Real}</code>. This is called being <strong>invariant</strong> in type theory… but for our purposes this just practically means that when we define a method we need to specify that we want it to apply to all subtypes.</p>
<p>For example, <code>myfunction(x::Tuple{Real})</code> would <em>not</em> be called if <code>x</code> was a <code>Tuple{Float64}</code> because it’s not a sub-type of <code>Tuple{Real}</code>. To act the way we want, we would define the method with the signature of <code>myfunction(x::Tuple{&lt;:Real})</code> or <code>myfunction(x::Tuple{T}) where {T&lt;:Real}</code>.</p>
</div>
</div>
</section>
<section id="keyword-arguments" class="level3" data-number="5.5.4">
<h3 data-number="5.5.4" class="anchored" data-anchor-id="keyword-arguments"><span class="header-section-number">5.5.4</span> Keyword Arguments</h3>
<p><strong>Keyword arguments</strong> are arguments that are passed to a function using named identifiers rather than position. In the following example, <code>filepath</code> is a <strong>positional argument</strong> while the two arguments after the semicolon (<code>;</code>) are keyword arguments.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb146"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb146-1"><a href="#cb146-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">read_data</span>(filepath; normalizenames, hasheaderrow)</span>
<span id="cb146-2"><a href="#cb146-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ... function would be defined here</span></span>
<span id="cb146-3"><a href="#cb146-3" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>The function would need to be called and have the two keyword arguments specified:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb147"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read_data</span>(<span class="st">"results.csv"</span>; normalizenames<span class="op">=</span><span class="cn">true</span>, hasheaderrow<span class="op">=</span><span class="cn">false</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="default-arguments" class="level3" data-number="5.5.5">
<h3 data-number="5.5.5" class="anchored" data-anchor-id="default-arguments"><span class="header-section-number">5.5.5</span> Default Arguments</h3>
<p>We are able to define default arguments for both positional and keyword arguments via an assignment expression in the function signature. For example, we can make it so that the user need not specify all the options for each call. Modifying the prior example so that typical CSVs work with less customization from the user:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb148"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">read_data</span>(filepath;</span>
<span id="cb148-2"><a href="#cb148-2" aria-hidden="true" tabindex="-1"></a>    normalizenames <span class="op">=</span> <span class="cn">true</span>,</span>
<span id="cb148-3"><a href="#cb148-3" aria-hidden="true" tabindex="-1"></a>    hasheader <span class="op">=</span> <span class="cn">false</span></span>
<span id="cb148-4"><a href="#cb148-4" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>This is a simplified example, but if you look at the documentation for most data import packages you’ll see a lot of functionality defined via keyword arguments which have sensible defaults so that most of the time you need not worry about modifying them.</p>
</section>
<section id="sec-anonymous-functions" class="level3" data-number="5.5.6">
<h3 data-number="5.5.6" class="anchored" data-anchor-id="sec-anonymous-functions"><span class="header-section-number">5.5.6</span> Anonymous Functions</h3>
<p><strong>Anonymous functions</strong> are functions that have no name and are used in contexts where the name does not matter. The syntax is <code>x -&gt; ...expression with x...</code>. As an example, say that we want to create a vector from another where each element is squared. <code>map</code> applies a function to each member of a given collection:</p>
<div id="144" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="annotated-cell-83"><pre class="sourceCode julia code-annotation-code code-with-copy code-annotated"><code class="sourceCode julia"><span id="annotated-cell-83-1"><a href="#annotated-cell-83-1" aria-hidden="true" tabindex="-1"></a>v <span class="op">=</span> [<span class="fl">4</span>, <span class="fl">1</span>, <span class="fl">5</span>]</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-83" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-83-2" class="code-annotation-target"><a href="#annotated-cell-83-2" aria-hidden="true" tabindex="-1"></a><span class="fu">map</span>(x <span class="op">-&gt;</span> x<span class="op">^</span><span class="fl">2</span>, v)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-83" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-83" data-code-lines="2" data-code-annotation="1">The <code>x -&gt; x^2</code> is the anonymous function in this example.</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>3-element Vector{Int64}:
 16
  1
 25</code></pre>
</div>
</div>
<p>They are often used when constructing a new value from another value, or defining a function within optimization or solving routines.</p>
</section>
<section id="first-class-nature" class="level3" data-number="5.5.7">
<h3 data-number="5.5.7" class="anchored" data-anchor-id="first-class-nature"><span class="header-section-number">5.5.7</span> First Class Nature</h3>
<p>Functions in many languages including Julia are <strong>first class</strong> which means that functions can be assigned and moved around like data variables.</p>
<p>In this example, we have a general approach to calculate the error of a modeled result compared to a known truth. In this context, there are different ways to measure error of the modeled result and we can simplify the implementation of <code>loss</code> by keeping the different kinds of error defined separately. Then, we can assign a function to a variable and use it as an argument to another function:</p>
<div id="146" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="annotated-cell-84"><pre class="sourceCode julia code-annotation-code code-with-copy code-annotated"><code class="sourceCode julia"><span id="annotated-cell-84-1"><a href="#annotated-cell-84-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">square_error</span>(guess, correct)</span>
<span id="annotated-cell-84-2"><a href="#annotated-cell-84-2" aria-hidden="true" tabindex="-1"></a>    (correct <span class="op">-</span> guess)<span class="op">^</span><span class="fl">2</span></span>
<span id="annotated-cell-84-3"><a href="#annotated-cell-84-3" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="annotated-cell-84-4"><a href="#annotated-cell-84-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-84-5"><a href="#annotated-cell-84-5" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">abs_error</span>(guess, correct)</span>
<span id="annotated-cell-84-6"><a href="#annotated-cell-84-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">abs</span>(correct <span class="op">-</span> guess)</span>
<span id="annotated-cell-84-7"><a href="#annotated-cell-84-7" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="annotated-cell-84-8"><a href="#annotated-cell-84-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-84-9"><a href="#annotated-cell-84-9" aria-hidden="true" tabindex="-1"></a><span class="co"># obs meaning "observations"</span></span>
<span id="annotated-cell-84-10"><a href="#annotated-cell-84-10" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">loss</span>(modeled_obs,</span>
<span id="annotated-cell-84-11"><a href="#annotated-cell-84-11" aria-hidden="true" tabindex="-1"></a>    actual_obs,</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-84" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-84-12" class="code-annotation-target"><a href="#annotated-cell-84-12" aria-hidden="true" tabindex="-1"></a>    loss_function</span>
<span id="annotated-cell-84-13"><a href="#annotated-cell-84-13" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="annotated-cell-84-14"><a href="#annotated-cell-84-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sum</span>(</span>
<span id="annotated-cell-84-15"><a href="#annotated-cell-84-15" aria-hidden="true" tabindex="-1"></a>        <span class="fu">loss_function</span>.(modeled_obs, actual_obs)</span>
<span id="annotated-cell-84-16"><a href="#annotated-cell-84-16" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="annotated-cell-84-17"><a href="#annotated-cell-84-17" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="annotated-cell-84-18"><a href="#annotated-cell-84-18" aria-hidden="true" tabindex="-1"></a></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-84" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-84-19" class="code-annotation-target"><a href="#annotated-cell-84-19" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-84" data-target-annotation="3" onclick="event.preventDefault();">3</a><span id="annotated-cell-84-20" class="code-annotation-target"><a href="#annotated-cell-84-20" aria-hidden="true" tabindex="-1"></a>    a <span class="op">=</span> <span class="fu">loss</span>([<span class="fl">1</span>, <span class="fl">5</span>, <span class="fl">11</span>], [<span class="fl">1</span>, <span class="fl">4</span>, <span class="fl">9</span>], square_error)</span>
<span id="annotated-cell-84-21"><a href="#annotated-cell-84-21" aria-hidden="true" tabindex="-1"></a>    b <span class="op">=</span> <span class="fu">loss</span>([<span class="fl">1</span>, <span class="fl">5</span>, <span class="fl">11</span>], [<span class="fl">1</span>, <span class="fl">4</span>, <span class="fl">9</span>], abs_error)</span>
<span id="annotated-cell-84-22"><a href="#annotated-cell-84-22" aria-hidden="true" tabindex="-1"></a>    a, b</span>
<span id="annotated-cell-84-23"><a href="#annotated-cell-84-23" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-84" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-84" data-code-lines="12" data-code-annotation="1"><code>loss_function</code> is a variable that will refer to a function instead of data.</span>
</dd>
<dt data-target-cell="annotated-cell-84" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-84" data-code-lines="19" data-code-annotation="2">Using a <code>let</code> block here is good practice to not have temporary variables <code>a</code> and <code>b</code> scattered around our workspace.</span>
</dd>
<dt data-target-cell="annotated-cell-84" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-84" data-code-lines="20,21" data-code-annotation="3">Using a function as an argument to another function is an example of functions being treated as “first class”.</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>(5, 3)</code></pre>
</div>
</div>
</section>
<section id="broadcasting" class="level3" data-number="5.5.8">
<h3 data-number="5.5.8" class="anchored" data-anchor-id="broadcasting"><span class="header-section-number">5.5.8</span> Broadcasting</h3>
<p>Looking at the prior definition of <code>dist</code>, what if we wanted to compute the squared distance from the origin for a set of points? If those points are stored in an array, we can <strong>broadcast</strong> functions to all members of a collection at the same time. This is accomplished using the <strong>dot-syntax</strong> as follows:</p>
<div id="148" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb151"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a>points <span class="op">=</span> [<span class="fu">Point2D</span>(<span class="fl">1</span>, <span class="fl">2</span>), <span class="fu">Point2D</span>(<span class="fl">3</span>, <span class="fl">4</span>), <span class="fu">Point2D</span>(<span class="fl">6</span>, <span class="fl">7</span>)]</span>
<span id="cb151-2"><a href="#cb151-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dist</span>.(points) <span class="op">.^</span> <span class="fl">2</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>3-element Vector{Float64}:
  5.000000000000001
 25.0
 85.0</code></pre>
</div>
</div>
<p>Let’s unpack that a bit more:</p>
<ol type="1">
<li>The <code>.</code> in <code>dist.(points)</code> tells Julia to apply the function <code>dist</code> to each element in <code>points</code>.</li>
<li>The <code>.</code> in <code>.^</code> tells Julia to square each value as well</li>
</ol>
<p>Why broadcasting is useful:</p>
<ol type="1">
<li>Without needing any redefinition of functions we were able to transform the function <code>dist</code> and exponentiation (<code>^</code>) to work on a collection of data. This means that we can keep our code simpler and easier to reason about (operating on individual things is easier than adding logic to handle collections of things).</li>
<li>When multiple broadcasted operations are joined together, Julia can <strong>fuse</strong> the operations so that each operation is performed at the same time instead of each step sequentially. That is, if the operation were not fused, the computer would first calculate <code>dist</code> for each point, and then apply the square on the collection of distances. When it’s fused, the operations are combined into a single pass over the data without creating an interim set of values.</li>
</ol>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>For readers coming from numpy-flavored Python or R, broadcasting is a way that can feel familiar to the array-oriented behavior of those two languages. Once you feel comfortable with Julia in general, you may find yourself relaxing and relying less on array-oriented design and instead picking whichever iteration paradigm feels most natural for the problem at hand: loops or broadcasting over arrays.</p>
</div>
</div>
<section id="broadcasting-rules" class="level4" data-number="5.5.8.1">
<h4 data-number="5.5.8.1" class="anchored" data-anchor-id="broadcasting-rules"><span class="header-section-number">5.5.8.1</span> Broadcasting Rules</h4>
<p>What happens if one of the collections is not the same size as the others? When broadcasting, singleton dimensions (i.e.&nbsp;the 1 in 1xN, “1-by-N”, dimensions) will be expanded automatically when it makes sense. For example, if you have a single element and a one dimensional array, the single element will be expanded in the function call without using any additional memory (if that dimension matches one of the dimensions of the other array).</p>
<p>The rules with an MxN and a PxQ array:</p>
<ul>
<li>either (M and P) or (N and Q) need to be the same, <em>and</em></li>
<li>one of the non-matching dimensions needs to be 1</li>
</ul>
<p>Some examples might clarify. This 1x1 element is being combined with a 4x1, so there is a compatible dimension (N and Q match, M is 1):</p>
<div id="150" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb153"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="fl">2</span> <span class="op">.^</span> [<span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>4-element Vector{Int64}:
 1
 2
 4
 8</code></pre>
</div>
</div>
<p>Here, this 1x3 works with the 2x3 (N and Q match, M is 1)</p>
<div id="152" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb155"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a>[<span class="fl">1</span> <span class="fl">2</span> <span class="fl">3</span>] <span class="op">.+</span> [<span class="fl">1</span> <span class="fl">2</span> <span class="fl">3</span>; <span class="fl">4</span> <span class="fl">5</span> <span class="fl">6</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>2×3 Matrix{Int64}:
 2  4  6
 5  7  9</code></pre>
</div>
</div>
<p>This 3x1 isn’t compatible with this 2x3 array (neither M and P nor N and Q match)</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb157"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a>[<span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>] <span class="op">.+</span> [<span class="fl">1</span> <span class="fl">2</span> <span class="fl">3</span>; <span class="fl">4</span> <span class="fl">5</span> <span class="fl">6</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>This 2x2 isn’t compatible with the 2x3 (M and P match, but neither N nor Q is 1):</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb158"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb158-1"><a href="#cb158-1" aria-hidden="true" tabindex="-1"></a>[<span class="fl">1</span> <span class="fl">2</span>; <span class="fl">3</span> <span class="fl">4</span>] <span class="op">.+</span> [<span class="fl">1</span> <span class="fl">2</span> <span class="fl">3</span>; <span class="fl">4</span> <span class="fl">5</span> <span class="fl">6</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="not-broadcasting" class="level4" data-number="5.5.8.2">
<h4 data-number="5.5.8.2" class="anchored" data-anchor-id="not-broadcasting"><span class="header-section-number">5.5.8.2</span> Not Broadcasting</h4>
<p>What if you do not want the array to be used element-wise when broadcasting? Then you can wrap the array in a <code>Ref</code>, which is used in broadcasting to make the array be treated like a scalar. In the example below, <code>in(needle,haystack)</code> searches a collection (<code>haystack</code>) for an item (<code>needle</code>) and returns <code>true</code> or <code>false</code> if the item is in the collection:</p>
<div id="154" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb159"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a><span class="fu">in</span>(<span class="fl">4</span>, [<span class="fl">1</span> <span class="fl">2</span> <span class="fl">3</span>; <span class="fl">4</span> <span class="fl">5</span> <span class="fl">6</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>true</code></pre>
</div>
</div>
<p>What if we had an array of things (“needles”) that we wanted to search for? By default, broadcasting would effectively split the array up into collections of individual elements to search:</p>
<div id="156" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb161"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a><span class="fu">in</span>.([<span class="fl">1</span>, <span class="fl">9</span>], [<span class="fl">1</span> <span class="fl">2</span> <span class="fl">3</span>; <span class="fl">4</span> <span class="fl">5</span> <span class="fl">6</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>2×3 BitMatrix:
 1  0  0
 0  0  0</code></pre>
</div>
</div>
<p>Effectively, broadcasting paired up each element of the vector with each row of the matrix:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb163"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a><span class="fu">in</span>(<span class="fl">1</span>, [<span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>]) <span class="co"># first element checked against first row</span></span>
<span id="cb163-2"><a href="#cb163-2" aria-hidden="true" tabindex="-1"></a><span class="fu">in</span>(<span class="fl">9</span>, [<span class="fl">4</span>, <span class="fl">5</span>, <span class="fl">6</span>]) <span class="co"># second element checked against second row</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>If we were expecting Julia to return <code>[true,false]</code> (that the first needle is in the haystack but the second needle is not), then we need to tell Julia not to broadcast along the second array with <code>Ref</code>:</p>
<div id="158" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb164"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb164-1"><a href="#cb164-1" aria-hidden="true" tabindex="-1"></a><span class="fu">in</span>.([<span class="fl">1</span>, <span class="fl">9</span>], <span class="fu">Ref</span>([<span class="fl">1</span> <span class="fl">2</span> <span class="fl">3</span>; <span class="fl">4</span> <span class="fl">5</span> <span class="fl">6</span>]))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>2-element BitVector:
 1
 0</code></pre>
</div>
</div>
</section>
</section>
<section id="sec-pass-by-sharing" class="level3" data-number="5.5.9">
<h3 data-number="5.5.9" class="anchored" data-anchor-id="sec-pass-by-sharing"><span class="header-section-number">5.5.9</span> Passing by Sharing</h3>
<p>We often want to share data between scopes, such as between modules or by passing data into a function’s scope. Arguments to a function in Julia are <strong>passed-by-sharing</strong> which means that an outside variable can be mutated from within a function. We can modify the array in the outer scope (scope discussed later in this chapter) from within the function. In this example, we modify the array that is assigned to <code>v</code> by doubling each element:</p>
<div id="160" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb166"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb166-1"><a href="#cb166-1" aria-hidden="true" tabindex="-1"></a>v <span class="op">=</span> [<span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>]</span>
<span id="cb166-2"><a href="#cb166-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb166-3"><a href="#cb166-3" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">double!</span>(v)</span>
<span id="cb166-4"><a href="#cb166-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="fu">eachindex</span>(v)</span>
<span id="cb166-5"><a href="#cb166-5" aria-hidden="true" tabindex="-1"></a>        v[i] <span class="op">=</span> <span class="fl">2</span> <span class="op">*</span> v[i]</span>
<span id="cb166-6"><a href="#cb166-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb166-7"><a href="#cb166-7" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb166-8"><a href="#cb166-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb166-9"><a href="#cb166-9" aria-hidden="true" tabindex="-1"></a><span class="fu">double!</span>(v)</span>
<span id="cb166-10"><a href="#cb166-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb166-11"><a href="#cb166-11" aria-hidden="true" tabindex="-1"></a>v</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>3-element Vector{Int64}:
 2
 4
 6</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>Convention in Julia is that a function that modifies its arguments has a <code>!</code> in its name and we follow this convention in <code>double!</code> above. Another example would be the built-in function <code>sort!</code> which will sort an array in-place without allocating a new array to store the sorted values.</p>
</div>
</div>
<p>We won’t discuss all potential ways that programming languages can behave in this regard, but an alternative that one may have seen before (e.g.&nbsp;in Matlab) is pass-by-value where a modification to an argument only modifies the value within the scope. Here’s how to replicate that in Julia by <code>copy</code>ing the value before handing it to a function. This time, v is not modified because we only passed a copy of the array and not the array itself:</p>
<div id="162" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb168"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb168-1"><a href="#cb168-1" aria-hidden="true" tabindex="-1"></a>v <span class="op">=</span> [<span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>]</span>
<span id="cb168-2"><a href="#cb168-2" aria-hidden="true" tabindex="-1"></a><span class="fu">double!</span>(<span class="fu">copy</span>(v))</span>
<span id="cb168-3"><a href="#cb168-3" aria-hidden="true" tabindex="-1"></a>v</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>3-element Vector{Int64}:
 1
 2
 3</code></pre>
</div>
</div>
</section>
<section id="the-function-type" class="level3" data-number="5.5.10">
<h3 data-number="5.5.10" class="anchored" data-anchor-id="the-function-type"><span class="header-section-number">5.5.10</span> The Function Type</h3>
<p>In Julia, every function is an object with its own unique type. <code>Function</code> is the abstract supertype of all functions. You can see this by inspecting the type of a function:</p>
<div id="164" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb170"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb170-1"><a href="#cb170-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(<span class="op">+</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>typeof(+) (singleton type of function +, subtype of Function)</code></pre>
</div>
</div>
<p>The output, <code>typeof(+)</code>, indicates that the function <code>+</code> has its own special type. This specific type is a subtype of the abstract <code>Function</code> type:</p>
<div id="166" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb172"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb172-1"><a href="#cb172-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(<span class="op">+</span>) <span class="op">&lt;:</span><span class="dt"> Function</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>true</code></pre>
</div>
</div>
<p>This is true for any function, including ones you define:</p>
<div id="168" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb174"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb174-1"><a href="#cb174-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">my_func</span>(x)</span>
<span id="cb174-2"><a href="#cb174-2" aria-hidden="true" tabindex="-1"></a>    x <span class="op">+</span> <span class="fl">1</span></span>
<span id="cb174-3"><a href="#cb174-3" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb174-4"><a href="#cb174-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb174-5"><a href="#cb174-5" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(my_func) <span class="op">&lt;:</span><span class="dt"> Function</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>true</code></pre>
</div>
</div>
</section>
</section>
<section id="sec-scope" class="level2" data-number="5.6">
<h2 data-number="5.6" class="anchored" data-anchor-id="sec-scope"><span class="header-section-number">5.6</span> Scope</h2>
<p>In projects of even modest complexity, it can be challenging to come up with unique identifiers for different functions or variables. <strong>Scope</strong> refers to the bounds for which an identifier is available. We will often talk about the <strong>local scope</strong> that’s inside some expression that creates a narrowly-defined scope (such as a <code>function</code> or <code>let</code> or <code>module</code> block) or the <strong>global scope</strong> which is the top level scope that contains everything else inside of it. Here are a few examples to demonstrate scope.</p>
<div id="170" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="annotated-cell-99"><pre class="sourceCode julia code-annotation-code code-with-copy code-annotated"><code class="sourceCode julia"><a class="code-annotation-anchor" data-target-cell="annotated-cell-99" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-99-1" class="code-annotation-target"><a href="#annotated-cell-99-1" aria-hidden="true" tabindex="-1"></a>i <span class="op">=</span> <span class="fl">1</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-99" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-99-2" class="code-annotation-target"><a href="#annotated-cell-99-2" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-99" data-target-annotation="3" onclick="event.preventDefault();">3</a><span id="annotated-cell-99-3" class="code-annotation-target"><a href="#annotated-cell-99-3" aria-hidden="true" tabindex="-1"></a>    j <span class="op">=</span> <span class="fl">3</span></span>
<span id="annotated-cell-99-4"><a href="#annotated-cell-99-4" aria-hidden="true" tabindex="-1"></a>    i <span class="op">+</span> j</span>
<span id="annotated-cell-99-5"><a href="#annotated-cell-99-5" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-99" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-99" data-code-lines="1" data-code-annotation="1"><code>i</code> is defined in the global scope and would be available to other inner scopes.</span>
</dd>
<dt data-target-cell="annotated-cell-99" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-99" data-code-lines="2" data-code-annotation="2">The <code>let ... end</code> block creates a local scope which inherits the defined global scope definitions.</span>
</dd>
<dt data-target-cell="annotated-cell-99" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-99" data-code-lines="3" data-code-annotation="3"><code>j</code> is only defined in the local scope created by the <code>let</code> block.</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>4</code></pre>
</div>
</div>
<p>In fact, if we try to use <code>j</code> outside of the scope defined above we will get an error<a href="#fn15" class="footnote-ref" id="fnref15" role="doc-noteref"><sup>15</sup></a>.</p>
<div id="172" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb177"><pre class="sourceCode julia code-overflow-wrap code-with-copy"><code class="sourceCode julia"><span id="cb177-1"><a href="#cb177-1" aria-hidden="true" tabindex="-1"></a>j</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre>UndefVarError: `j` not defined in `Main.Notebook`
Suggestion: check for spelling errors or missing imports.
Stacktrace:
  [1] <span class="ansi-bold">eval</span><span class="ansi-bold">(</span><span class="ansi-bright-black-fg">m</span>::Module, <span class="ansi-bright-black-fg">e</span>::Any<span class="ansi-bold">)</span>
<span class="ansi-bright-black-fg">    @</span> <span class="ansi-bright-black-fg">Core</span> <span class="ansi-bright-black-fg">./</span><span style="text-decoration:underline" class="ansi-bright-black-fg">boot.jl:489</span>
  [2] <span class="ansi-bold">(::QuartoNotebookWorker.var"#10#11"{Module, Expr})</span><span class="ansi-bold">(</span><span class="ansi-bold">)</span>
<span class="ansi-bright-black-fg">    @</span> <span class="ansi-magenta-fg">QuartoNotebookWorker</span> <span class="ansi-bright-black-fg">~/.julia/packages/QuartoNotebookRunner/xXgbH/src/QuartoNotebookWorker/src/</span><span style="text-decoration:underline" class="ansi-bright-black-fg">render_code.jl:103</span>

... (82 more lines omitted)
</pre></div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p><code>let</code> blocks are a great way to organize your code in bite-sized chunks or to be able to re-use common variable names without worrying about conflict. Here’s an example of using let blocks to:</p>
<ol type="1">
<li>Perform intermediate calculations without fear of returning a partially modified variable</li>
<li>Re-use common variable names</li>
</ol>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb178"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb178-1"><a href="#cb178-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb178-2"><a href="#cb178-2" aria-hidden="true" tabindex="-1"></a>bonds <span class="op">=</span> <span class="kw">let</span></span>
<span id="cb178-3"><a href="#cb178-3" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> CSV.<span class="fu">read</span>(<span class="st">"bonds.csv"</span>, DataFrame)</span>
<span id="cb178-4"><a href="#cb178-4" aria-hidden="true" tabindex="-1"></a>    df.issuer <span class="op">=</span> <span class="fu">lookup_issuer</span>(df.CUSIP)</span>
<span id="cb178-5"><a href="#cb178-5" aria-hidden="true" tabindex="-1"></a>    df</span>
<span id="cb178-6"><a href="#cb178-6" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb178-7"><a href="#cb178-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb178-8"><a href="#cb178-8" aria-hidden="true" tabindex="-1"></a>mortgages <span class="op">=</span> <span class="kw">let</span></span>
<span id="cb178-9"><a href="#cb178-9" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> CSV.<span class="fu">read</span>(<span class="st">"mortgages.csv"</span>, DataFrame)</span>
<span id="cb178-10"><a href="#cb178-10" aria-hidden="true" tabindex="-1"></a>    df.issuer <span class="op">=</span> <span class="fu">lookup_issuer</span>(df.CUSIP)</span>
<span id="cb178-11"><a href="#cb178-11" aria-hidden="true" tabindex="-1"></a>    df</span>
<span id="cb178-12"><a href="#cb178-12" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>If we were running this interactively (e.g.&nbsp;step-by-step in VS Code, the REPL, or notebooks) then these two code blocks will run completely and will run separately. The short, descriptive name <code>df</code> is reused, but there’s no chance of conflict. We also can’t easily run the block of code (<code>let ... end</code>) and get a partially evaluated result (e.g.&nbsp;getting the dataframe before it has been appropriately modified to add the <code>issuer</code> column).</p>
</div>
</div>
<p>Here is an example with functions:</p>
<div id="174" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="annotated-cell-101"><pre class="sourceCode julia code-annotation-code code-with-copy code-annotated"><code class="sourceCode julia"><span id="annotated-cell-101-1"><a href="#annotated-cell-101-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> <span class="fl">2</span></span>
<span id="annotated-cell-101-2"><a href="#annotated-cell-101-2" aria-hidden="true" tabindex="-1"></a>base <span class="op">=</span> <span class="fl">10</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-101" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-101-3" class="code-annotation-target"><a href="#annotated-cell-101-3" aria-hidden="true" tabindex="-1"></a><span class="fu">foo</span>() <span class="op">=</span> base<span class="op">^</span>x</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-101" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-101-4" class="code-annotation-target"><a href="#annotated-cell-101-4" aria-hidden="true" tabindex="-1"></a><span class="fu">foo</span>(x) <span class="op">=</span> base<span class="op">^</span>x</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-101" data-target-annotation="3" onclick="event.preventDefault();">3</a><span id="annotated-cell-101-5" class="code-annotation-target"><a href="#annotated-cell-101-5" aria-hidden="true" tabindex="-1"></a><span class="fu">foo</span>(x, base) <span class="op">=</span> base<span class="op">^</span>x</span>
<span id="annotated-cell-101-6"><a href="#annotated-cell-101-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-101-7"><a href="#annotated-cell-101-7" aria-hidden="true" tabindex="-1"></a><span class="fu">foo</span>(), <span class="fu">foo</span>(<span class="fl">4</span>), <span class="fu">foo</span>(<span class="fl">4</span>, <span class="fl">4</span>)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-101" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-101" data-code-lines="3" data-code-annotation="1">Both <code>base</code> and <code>x</code> are inherited from the global scope.</span>
</dd>
<dt data-target-cell="annotated-cell-101" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-101" data-code-lines="4" data-code-annotation="2"><code>x</code> is based on the local scope from the function’s arguments and <code>base</code> is inherited from the global scope.</span>
</dd>
<dt data-target-cell="annotated-cell-101" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-101" data-code-lines="5" data-code-annotation="3">Both <code>base</code> and <code>x</code> are defined in the local scope via the function’s arguments.</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>(100, 10000, 256)</code></pre>
</div>
</div>
<p>In Julia, it’s always best to explicitly pass arguments to functions rather than relying on them coming from an inherited scope. This is more straight-forward and easier to reason about and it also allows Julia to optimize the function to run faster because all relevant variables coming from outside the function are defined at the function’s entry point (the arguments).</p>
<section id="modules-and-namespaces" class="level3" data-number="5.6.1">
<h3 data-number="5.6.1" class="anchored" data-anchor-id="modules-and-namespaces"><span class="header-section-number">5.6.1</span> Modules and Namespaces</h3>
<p><strong>Modules</strong> are ways to encapsulate related functionality together. Another benefit is that the variables inside the module don’t “pollute” the <strong>namespace</strong> of your current scope. Here’s an example:</p>
<div id="176" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="annotated-cell-102"><pre class="sourceCode julia code-annotation-code code-with-copy code-annotated"><code class="sourceCode julia"><a class="code-annotation-anchor" data-target-cell="annotated-cell-102" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-102-1" class="code-annotation-target"><a href="#annotated-cell-102-1" aria-hidden="true" tabindex="-1"></a><span class="kw">module</span> Shape</span>
<span id="annotated-cell-102-2"><a href="#annotated-cell-102-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-102-3"><a href="#annotated-cell-102-3" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Triangle{T}</span>
<span id="annotated-cell-102-4"><a href="#annotated-cell-102-4" aria-hidden="true" tabindex="-1"></a>    base<span class="op">::</span><span class="dt">T</span></span>
<span id="annotated-cell-102-5"><a href="#annotated-cell-102-5" aria-hidden="true" tabindex="-1"></a>    height<span class="op">::</span><span class="dt">T</span></span>
<span id="annotated-cell-102-6"><a href="#annotated-cell-102-6" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="annotated-cell-102-7"><a href="#annotated-cell-102-7" aria-hidden="true" tabindex="-1"></a></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-102" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-102-8" class="code-annotation-target"><a href="#annotated-cell-102-8" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">area</span>(t<span class="op">::</span><span class="dt">Triangle</span>)</span>
<span id="annotated-cell-102-9"><a href="#annotated-cell-102-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> t.base <span class="op">*</span> t.height <span class="op">/</span> <span class="fl">2</span></span>
<span id="annotated-cell-102-10"><a href="#annotated-cell-102-10" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="annotated-cell-102-11"><a href="#annotated-cell-102-11" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="annotated-cell-102-12"><a href="#annotated-cell-102-12" aria-hidden="true" tabindex="-1"></a></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-102" data-target-annotation="3" onclick="event.preventDefault();">3</a><span id="annotated-cell-102-13" class="code-annotation-target"><a href="#annotated-cell-102-13" aria-hidden="true" tabindex="-1"></a>t <span class="op">=</span> Shape.<span class="fu">Triangle</span>(<span class="fl">4</span>, <span class="fl">2</span>)</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-102" data-target-annotation="4" onclick="event.preventDefault();">4</a><span id="annotated-cell-102-14" class="code-annotation-target"><a href="#annotated-cell-102-14" aria-hidden="true" tabindex="-1"></a>area <span class="op">=</span> Shape.<span class="fu">area</span>(t)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-102" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-102" data-code-lines="1" data-code-annotation="1"><code>module</code> defines an encapsulated block of code which is anchored to the namespace <code>Shape</code></span>
</dd>
<dt data-target-cell="annotated-cell-102" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-102" data-code-lines="8" data-code-annotation="2">Here, <code>area</code> is a <em>function</em> defined within the <code>Shape</code> module.</span>
</dd>
<dt data-target-cell="annotated-cell-102" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-102" data-code-lines="13" data-code-annotation="3">Outside of <code>Shape</code> module, we can access the definitions inside via the <code>Module.identifier</code> syntax.</span>
</dd>
<dt data-target-cell="annotated-cell-102" data-target-annotation="4">4</dt>
<dd>
<span data-code-cell="annotated-cell-102" data-code-lines="14" data-code-annotation="4">Here, <code>area</code> is a <em>variable</em> in our global scope that <em>does not</em> conflict with the <code>area</code> defined within the <code>Shape</code> module. If <code>Shape.area</code> were not within a module then when we said <code>area = ...</code> we would have reassigned <code>area</code> to no longer refer to the function and instead would refer to the area of our triangle.</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>4.0</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Summarizing related terminology:</p>
<ul>
<li><p>A <strong>module</strong> is a block of code such as <code>module MySimulation ... end</code></p></li>
<li><p>A <strong>package</strong> is a module that has a specific set of files and associated metadata. Essentially, it’s a module with a <code>Project.toml</code> file that has a name and unique identifier listed, and a file in a <code>src/</code> directory called <code>MySimulation.jl</code></p>
<ul>
<li><strong>Library</strong> is just another name for a package, and the most common context this comes up is when talking about the packages that are bundled with Julia itself called the <strong>standard library</strong> (<code>stdlib</code>).</li>
</ul></li>
</ul>
</div>
</div>


</section>
</section>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1"><p>Said differently, computer science may contemplate ideas and abstractions more generally than a specific implementation, as in mathematics where a theorem may be proved (<span class="math inline">\(a^2 + b^2 = c^2\)</span>) without resorting to specific numeric examples (<span class="math inline">\(3^2 + 4^2 = 5^2\)</span>).<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>The Ship of Theseus problem specifically refers to a legendary ancient Greek ship, owned by the hero Theseus. The paradox arises from the scenario where, over time, each wooden part of the ship is replaced with identical materials, leading to the question of whether the fully restored ship is still the same ship as the original. The Ship of Theseus problem is a thought experiment in philosophy that explores the nature of identity and change. It questions whether an object that has had all of its components replaced remains fundamentally the same object.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>These binary representations correspond to <code>B</code> and <code>66</code> with the <em>ASCII character set</em> and 8-bit integer encodings respectively, discussed later in this chapter.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>Some distinctions you may encounter: in short-form, “kb” means kilo<em>bits</em> while the upper-case “B” in “kB” means kilo<em>bytes</em>. Also confusingly, sometimes the “k” can be binary or decimal - because computers speak in binary, a binary “k” means 1024 (equal to 2^10) instead of the usual decimal 1000. In most computer contexts, the binary (multiples of 1024) is more common.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>The term floating point refers to the fact that the number’s radix (decimal) point can “float” between the significant digits of the number.<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p>That is, it <em>reads</em> the code input from the user, <em>evaluates</em> what code was given to it, <em>prints</em> the result of the input to the screen, and <em>loops</em> through the process again.<a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn7"><p>Accurate only to a limited precision, as described in <a href="#sec-number-types" class="quarto-xref"><span>Section 5.4.1</span></a>.<a href="#fnref7" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn8"><p>Whether an index starts at <code>1</code> or <code>0</code> is sometimes debated. Zero-based indexing is natural in the context of low-level programming which deal with bits and positional <em>offsets</em> in computer memory. For higher level programming one-based indexing is more natural: in a set of data stored in an array, it is much more natural to reference the <em>first</em> (through <span class="math inline">\(n^{th}\)</span>) datum instead of the <em>zeroth</em> (through <span class="math inline">\((n-1)^{th}\)</span> datum.<a href="#fnref8" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn9"><p>Arrays in Julia can actually be indexed with an arbitrary starting point: see the package <a href="https://github.com/JuliaArrays/OffsetArrays.jl">OffsetArrays.jl</a><a href="#fnref9" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn10"><p>The triangular numbers (sum of integers from <span class="math inline">\(1\)</span> to <span class="math inline">\(n\)</span>) are:<span class="math display">\[
T_n = \sum_{k=1}^n k = 1 + 2 + \cdots + n
    = \frac{n^2 + n}{2} = \frac{n(n+1)}{2}
    = \binom{n+1}{2}
\]</span><a href="#fnref10" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn11"><p>If the <code>step</code> keyword argument is defined: whether the last number is in the resulting range depends on if the step evenly divides the end of the range. In the example <code>1:2:7</code>, the <code>step</code> is <code>2</code>.<a href="#fnref11" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn12"><p>Under the hood, strings are essentially a vector of characters but there are complexities with character encoding that don’t allow a lossless conversion to individual characters of uniform bit length. This is for historical compatibility reasons and to avoid making most documents’ file sizes larger than it needs to be.<a href="#fnref12" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn13"><p>What this means will be explained in <a href="hardware.html" class="quarto-xref"><span>Chapter 9</span></a> .<a href="#fnref13" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn14"><p><code>Missing</code> and <code>Nothing</code> are instances of <strong>singleton type,</strong> which means that there is only a single value that either type can take on.<a href="#fnref14" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn15"><p>Note that this error <strong>stack trace</strong> is unfortunately much messier due to it running in a Quarto notebook environment. When running scripts or in a REPL, your stack traces should look much simpler and easier to follow the error’s lineage.<a href="#fnref15" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    // Ensure there is a toggle, if there isn't float one in the top right
    if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
      const a = window.document.createElement('a');
      a.classList.add('top-right');
      a.classList.add('quarto-color-scheme-toggle');
      a.href = "";
      a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
      const i = window.document.createElement("i");
      i.classList.add('bi');
      a.appendChild(i);
      window.document.body.appendChild(a);
    }
    setColorSchemeToggle(hasAlternateSentinel())
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./conceptual-foundations.html" class="pagination-link" aria-label="Foundations: Programming and Abstractions">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Foundations: Programming and Abstractions</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./first-abstractions.html" class="pagination-link" aria-label="Functional Abstractions">
        <span class="nav-page-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Functional Abstractions</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>